<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>q2_feature_table : summarize</title>
    <link rel="stylesheet" href="./q2templateassets/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="./q2templateassets/css/normalize.css"/>
    <link rel="stylesheet" href="./q2templateassets/css/base-template.css"/>
    <script src="./q2templateassets/js/jquery-3.2.0.min.js" charset="utf-8"></script>
    <script src="./q2templateassets/js/bootstrap.min.js" charset="utf-8"></script>
    
<script src="js/vega.min.js"></script>
<script src="js/vega-embed.min.js"></script>
<script src="util.js"></script>
<link rel="stylesheet" type="text/css" href="css/spinkit.css" /> 
  </head>
  <body>
    <div class="container-fluid">
      <div id="q2templatesheader" class="row">
        <div class="col-lg-12">
          <a href="http://qiime2.org/">
            <img src="./q2templateassets/img/qiime2-rect-200.png"
            alt="QIIME 2">
          </a>
        </div>
      </div>
        

  <div class="row">
    <div class="col-lg-12">
      <ul class="nav nav-tabs">
        
          <li class="">
            <a href="index.html">
              Overview
            </a>
          </li>
        
          <li class="active">
            <a href="sample-frequency-detail.html">
              Interactive Sample Detail
            </a>
          </li>
        
          <li class="">
            <a href="feature-frequency-detail.html">
              Feature Detail
            </a>
          </li>
        
      </ul>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-12">
      


<div class="row">

  <div class="col-lg-8">
    <div id="plot">
      <div id="loading" class="spinner">
        <div class="rect1"></div>
        <div class="rect2"></div>
        <div class="rect3"></div>
        <div class="rect4"></div>
        <div class="rect5"></div>
      </div>
    </div>
  </div>

  <div class="col-lg-4">
    <div class="row">
      <div class="col-lg-12">
        <h3>Plot Controls</h3>
      </div>
    </div>

    <div class="row">
      <div class="col-lg-12" id="toolbar"></div>
    </div>

    <div class="row">
      <div class="col-lg-12" id="metadata-category"></div>
    </div>

    <div class="row">
      <div class="col-lg-12" id="sampling-depth-slider"></div>
    </div>

    <div class="row">
      <div class="col-lg-12" id="text-field"></div>
    </div>
  </div>

</div>






<script type="text/javascript">
  function handleErrors(errors, element, msg) {
    console.error(errors);
    msg = msg === undefined ? '' : msg + '<br><br>';
    var helpMsg = '<p class="alert alert-danger"> \
                   There was an error loading and rendering the \
                   visualization.<br><br>' + msg + 'Please \
                   copy-and-paste the following error messages when \
                   reporting this error (please be aware that the content \
                   of your analysis data and/or metadata is included in \
                   these messages):</p>';
    var helpMsgDiv = $('<div></div>');
    helpMsgDiv.append(helpMsg);
    helpMsgDiv.append('<pre><code>' + errors.join('\n\n') + '</code></pre>');
    element.replaceWith(helpMsgDiv);
  }
  window.onerror = function(error) {
    handleErrors([error], $('#loading'));
  };
</script>
<script id="spec" type="application/json">
{"$schema": "https://vega.github.io/schema/vega/v5.json", "autosize": {"contains": "content", "type": "fit-x", "resize": true}, "width": 800, "data": [{"transform": [{"as": "selectedCategory", "expr": "datum.metadata[category]", "type": "formula"}], "name": "table", "values": [{"id": "Whitelands_2018_19_", "metadata": {"Year_est": "2018", "Age": "3", "OS_location": "SU2990087100", "Lat_long": "51.581972;_-1.5698756", "Establishment": "seed_mix", "pH": 8.03, "EC": 136.4, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 7553581.250000014}, {"id": "Castle_Field_West__W_", "metadata": {"Year_est": "2002", "Age": "19", "OS_location": "SU2950086200", "Lat_long": "51.573901;_-1.5757235", "Establishment": "seed_mix", "pH": 7.93, "EC": 139.3, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 7801936.300000072}, {"id": "Toposcope_Field_-_1980s", "metadata": {"Year_est": "1985", "Age": "36", "OS_location": "SU2950086600", "Lat_long": "51.577497;_-1.5756901", "Establishment": "Natural_regen", "pH": 7.94, "EC": 139.7, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "1981-2000", "Age_group": "31-40", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 7797353.729999967}, {"id": "Bradenham_post-1986_b", "metadata": {"Year_est": "1986", "Age": "35", "OS_location": "SU8290097718", "Lat_long": "51.672127;_-0.80258692", "Establishment": "seed_mix", "pH": 7.84, "EC": 151.7, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "1981-2000", "Age_group": "31-40", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 7388391.640000037}, {"id": "Lardon_Chase_The_Holies_motorcycle", "metadata": {"Year_est": "2007", "Age": "14", "OS_location": "SU5930079800", "Lat_long": "51.514021;_-1.1468383", "Establishment": "Natural_regen", "pH": 7.94, "EC": 135.7, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 7556393.959999941}, {"id": "Stonehenge_2000_2017a", "metadata": {"Year_est": "2000", "Age": "21", "OS_location": "SU1370042400", "Lat_long": "51.180671;_-1.8053828", "Establishment": "Green_hay_bush", "pH": 7.88, "EC": 144.3, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 7662724.890000011}, {"id": "Stonehenge_2003_2017b", "metadata": {"Year_est": "2003", "Age": "18", "OS_location": "SU1150041600", "Lat_long": "51.173525;_-1.8368821", "Establishment": "Green_hay_bush", "pH": 7.69, "EC": 184.4, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 7609666.920000016}, {"id": "Stonehenge_2009", "metadata": {"Year_est": "2009", "Age": "12", "OS_location": "SU1050041700", "Lat_long": "51.174443;_-1.8511833", "Establishment": "Green_hay_bush", "pH": 7.82, "EC": 156.5, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 7675633.190000024}, {"id": "Stonehenge_2007_2016", "metadata": {"Year_est": "2007", "Age": "14", "OS_location": "SU1100041900", "Lat_long": "51.176233;_-1.8440251", "Establishment": "Green_hay_bush", "pH": 7.87, "EC": 158.8, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 7579939.739999976}, {"id": "Stonehenge_2005", "metadata": {"Year_est": "2005", "Age": "16", "OS_location": "SU1140042200", "Lat_long": "51.178922;_-1.8382937", "Establishment": "Green_hay_bush", "pH": 7.85, "EC": 145.0, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 7559864.740000025}, {"id": "Stonehenge_2002_2017", "metadata": {"Year_est": "2002", "Age": "19", "OS_location": "SU1480043200", "Lat_long": "51.187837;_-1.7896132", "Establishment": "Green_hay_bush", "pH": 7.91, "EC": 130.3, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 7816140.000000013}, {"id": "Stonehenge_2010", "metadata": {"Year_est": "2010", "Age": "11", "OS_location": "SU1070043000", "Lat_long": "51.186129;_-1.8482842", "Establishment": "Green_hay_bush", "pH": 7.69, "EC": 202.0, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 7623826.629999988}, {"id": "Stonehenge_2011", "metadata": {"Year_est": "2011", "Age": "10", "OS_location": "SU1050043600", "Lat_long": "51.191528;_-1.8511284", "Establishment": "Green_hay_bush", "pH": 7.85, "EC": 174.3, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 7599838.29000002}, {"id": "Stonehenge_-_Luxenborough_BankB", "metadata": {"Year_est": "2000", "Age": "21", "OS_location": "SU1290041900", "Lat_long": "51.176193;_-1.8168457", "Establishment": "Green_hay_bush", "pH": 7.78, "EC": 186.6, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 7531607.890000022}, {"id": "Watlington_natural_reversion", "metadata": {"Year_est": "2000", "Age": "21", "OS_location": "SU7050293600", "Lat_long": "51.636798;_-0.98266944", "Establishment": "Natural_regen", "pH": 7.8, "EC": 147.5, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 7408639.419999949}, {"id": "St_Catherines_A3", "metadata": {"Year_est": "1994", "Age": "27", "OS_location": "SU4812327449", "Lat_long": "51.044386;_-1.3149275", "Establishment": "Green_hay_bush", "pH": 7.63, "EC": 222.0, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 7709164.200000027}, {"id": "HARLEY_FARMS_Chittern", "metadata": {"Year_est": "2013", "Age": "8", "OS_location": "ST9762044730", "Lat_long": "51.201778;_-2.0354461", "Establishment": "seed_mix", "pH": 7.77, "EC": 197.9, "Cutting": "yes", "Cattle": "yes", "Sheep": "no", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 7733095.31000001}, {"id": "HARLEY_FARMS_New1", "metadata": {"Year_est": "2020", "Age": "1", "OS_location": "ST9346829822", "Lat_long": "51.067692;_-2.0945983", "Establishment": "seed_mix", "pH": 7.84, "EC": 144.1, "Cutting": "no", "Cattle": "yes", "Sheep": "no", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 7669658.710000037}, {"id": "HARLEY_FARMS_new2b", "metadata": {"Year_est": "2020", "Age": "1", "OS_location": "ST9242629613", "Lat_long": "51.065799;_-2.1094648", "Establishment": "seed_mix", "pH": 7.09, "EC": 102.5, "Cutting": "yes", "Cattle": "no", "Sheep": "no", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 7626266.580000004}, {"id": "WINDMILL_farm", "metadata": {"Year_est": "1990", "Age": "31", "OS_location": "SU7176229761", "Lat_long": "51.06271;_-0.97732036", "Establishment": "seed_mix", "pH": 7.32, "EC": 210.0, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "1981-2000", "Age_group": "31-40", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 7674077.280000018}, {"id": "DRUIDS", "metadata": {"Year_est": "2002", "Age": "19", "OS_location": "SU2964250324", "Lat_long": "51.251319;_-1.5766624", "Establishment": "seed_mix", "pH": 7.14, "EC": 176.3, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 7803847.21999995}, {"id": "Stratton_Wood", "metadata": {"Year_est": "1995", "Age": "26", "OS_location": "SU1647289260", "Lat_long": "51.601942;_-1.7635665", "Establishment": "seed_mix", "pH": 7.41, "EC": 126.8, "Cutting": "yes", "Cattle": "no", "Sheep": "no", "Plough": "yes", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 7657414.489999947}, {"id": "WESTMEAD_FARM", "metadata": {"Year_est": "2000", "Age": "21", "OS_location": "SU6317525168", "Lat_long": "51.022422;_-1.1006408", "Establishment": "seed_mix", "pH": 7.75, "EC": 159.0, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 7705267.810000045}, {"id": "RSPB_orig_green", "metadata": {"Year_est": "2006", "Age": "15", "OS_location": "SU2135640329", "Lat_long": "51.161815;_-1.6959767", "Establishment": "Green_hay_bush", "pH": 7.99, "EC": 138.1, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 7900618.6500000805}, {"id": "RSPB_churchil", "metadata": {"Year_est": "2010", "Age": "11", "OS_location": "SU2075340336", "Lat_long": "51.1619;_-1.7045994", "Establishment": "Green_hay_bush", "pH": 8.01, "EC": 116.8, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 7798274.779999946}, {"id": "RSPB_junction", "metadata": {"Year_est": "2007", "Age": "14", "OS_location": "SU2267739280", "Lat_long": "51.152332;_-1.6771517", "Establishment": "Green_hay_bush", "pH": 8.41, "EC": 24.6, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 7735430.179999978}, {"id": "RSPB_Mainline", "metadata": {"Year_est": "2016", "Age": "5", "OS_location": "SU2250539212", "Lat_long": "51.151728;_-1.6796151", "Establishment": "Green_hay_bush", "pH": 8.48, "EC": 23.4, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 7728649.859999994}, {"id": "Baltic_farm_1", "metadata": {"Year_est": "2005", "Age": "16", "OS_location": "SU0459767825", "Lat_long": "51.40943;_-1.9352946", "Establishment": "Green_hay_bush", "pH": 7.94, "EC": 29.2, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 7945424.36000008}, {"id": "Baltic_farm_2", "metadata": {"Year_est": "1998", "Age": "23", "OS_location": "SU0306867167", "Lat_long": "51.403524;_-1.9572835", "Establishment": "Green_hay_bush", "pH": 8.27, "EC": 29.6, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 7793736.549999966}, {"id": "WestEndFarm", "metadata": {"Year_est": "2019", "Age": "2", "OS_location": "SU0297366901", "Lat_long": "51.401133;_-1.9586514", "Establishment": "Green_hay_bush", "pH": 8.44, "EC": 24.1, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 8059060.189999935}, {"id": "HorntonHouseFarm_1_parallel", "metadata": {"Year_est": "2016", "Age": "5", "OS_location": "SU0584565118", "Lat_long": "51.385079;_-1.917395", "Establishment": "seed_mix", "pH": 8.6, "EC": 29.5, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 7776423.079999989}, {"id": "TownsendFarm_1", "metadata": {"Year_est": "2017", "Age": "4", "OS_location": "SU0775065316", "Lat_long": "51.386837;_-1.8900159", "Establishment": "seed_mix", "pH": 8.2, "EC": 36.6, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 7741096.739999944}, {"id": "TownsendFarm_2", "metadata": {"Year_est": "2010", "Age": "11", "OS_location": "SU0705164722", "Lat_long": "51.381505;_-1.9000725", "Establishment": "seed_mix", "pH": 8.45, "EC": 21.2, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 7719931.020000051}, {"id": "TownsendFarm_3_big", "metadata": {"Year_est": "2014", "Age": "7", "OS_location": "SU0886965184", "Lat_long": "51.385634;_-1.8739384", "Establishment": "Green_hay_bush", "pH": 7.92, "EC": 42.7, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 7771690.359999969}, {"id": "ChurchFarm", "metadata": {"Year_est": "2012", "Age": "9", "OS_location": "SU0979864321", "Lat_long": "51.377859;_-1.8606121", "Establishment": "seed_mix", "pH": 8.63, "EC": 20.7, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 7866751.2300000135}, {"id": "StowellFarms_1_adj", "metadata": {"Year_est": "2015", "Age": "6", "OS_location": "SU1362464180", "Lat_long": "51.376513;_-1.8056466", "Establishment": "seed_mix", "pH": 6.6, "EC": 21.8, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 8361406.209999992}, {"id": "MannorFmAltonBarnes", "metadata": {"Year_est": "2012", "Age": "9", "OS_location": "SU1211561331", "Lat_long": "51.35093;_-1.827423", "Establishment": "seed_mix", "pH": 8.07, "EC": 21.6, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 7596872.2500000745}, {"id": "HommingtonFarm", "metadata": {"Year_est": "2014", "Age": "7", "OS_location": "SU1332825982", "Lat_long": "51.033048;_-1.811306", "Establishment": "seed_mix", "pH": 8.22, "EC": 26.3, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 7879301.330000052}, {"id": "ThropeManor_1", "metadata": {"Year_est": "2002", "Age": "19", "OS_location": "SU0886123850", "Lat_long": "51.013962;_-1.8750607", "Establishment": "seed_mix", "pH": 7.54, "EC": 78.1, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 8325472.190000058}, {"id": "ThropeManor_2", "metadata": {"Year_est": "1998", "Age": "23", "OS_location": "SU0843924348", "Lat_long": "51.018447;_-1.8810649", "Establishment": "seed_mix", "pH": 7.73, "EC": 28.8, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 7940337.330000019}, {"id": "ThropeManor_3", "metadata": {"Year_est": "2000", "Age": "21", "OS_location": "SU0901525189", "Lat_long": "51.026001;_-1.8728325", "Establishment": "seed_mix", "pH": 8.13, "EC": 28.5, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 7941162.519999909}, {"id": "MannorFmBroadChalke", "metadata": {"Year_est": "2010", "Age": "11", "OS_location": "SU0468023121", "Lat_long": "51.007455;_-1.9346701", "Establishment": "Green_hay_bush", "pH": 8.24, "EC": 24.3, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 7796117.009999973}, {"id": "BigleyFm_1", "metadata": {"Year_est": "2014", "Age": "7", "OS_location": "ST9798720966", "Lat_long": "50.988091;_-2.0300532", "Establishment": "seed_mix", "pH": 8.1, "EC": 31.3, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 7972347.089999981}, {"id": "BigleyFm_2", "metadata": {"Year_est": "2017", "Age": "4", "OS_location": "ST9796821801", "Lat_long": "50.9956;_-2.0303288", "Establishment": "seed_mix", "pH": 7.35, "EC": 46.8, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 7653874.069999963}, {"id": "NorringtonMannorFm_1", "metadata": {"Year_est": "2009", "Age": "12", "OS_location": "ST9689721419", "Lat_long": "50.99216;_-2.0455866", "Establishment": "seed_mix", "pH": 7.83, "EC": 33.5, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 7850550.989999953}, {"id": "NorringtonMannorFm_2", "metadata": {"Year_est": "2009", "Age": "12", "OS_location": "ST9699420390", "Lat_long": "50.982907;_-2.0441957", "Establishment": "seed_mix", "pH": 8.2, "EC": 28.5, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 7866912.790000056}, {"id": "ManorFmBerwickStJohn_1", "metadata": {"Year_est": "2014", "Age": "7", "OS_location": "ST9468023123", "Lat_long": "51.007466;_-2.0772007", "Establishment": "seed_mix", "pH": 7.47, "EC": 17.83, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 8127307.030000041}, {"id": "ManorFmBerwickStJohn_3", "metadata": {"Year_est": "2018", "Age": "3", "OS_location": "ST9422022841", "Lat_long": "51.004926;_-2.0837525", "Establishment": "seed_mix", "pH": 8.36, "EC": 23.0, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 8006661.11999993}, {"id": "Jemma_1", "metadata": {"Year_est": "2010", "Age": "11", "OS_location": "SU1405276456", "Lat_long": "51.486882;_-1.7990143", "Establishment": "Green_hay_bush", "pH": 8.31, "EC": 33.5, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 7555349.080000046}, {"id": "Jemma_2", "metadata": {"Year_est": "2008", "Age": "13", "OS_location": "SU1194873670", "Lat_long": "51.46188;_-1.8294093", "Establishment": "Natural_regen", "pH": 7.96, "EC": 104.2, "Cutting": "no", "Cattle": "yes", "Sheep": "no", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 7740751.810000017}, {"id": "Jemma_7", "metadata": {"Year_est": "2014", "Age": "7", "OS_location": "SU1641473039", "Lat_long": "51.456096;_-1.7651546", "Establishment": "Green_hay_bush", "pH": 7.95, "EC": 106.1, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 7766121.3299999675}, {"id": "Jemma_4", "metadata": {"Year_est": "2015", "Age": "6", "OS_location": "SU1261971802", "Lat_long": "51.44507;_-1.8198169", "Establishment": "Green_hay_bush", "pH": 7.31, "EC": 145.8, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 7665493.149999992}, {"id": "Jemma_5", "metadata": {"Year_est": "2015", "Age": "6", "OS_location": "SU1538172691", "Lat_long": "51.452995;_-1.7800368", "Establishment": "seed_mix", "pH": 8.2, "EC": 77.7, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 7657356.250000056}, {"id": "Jemma_6", "metadata": {"Year_est": "2013", "Age": "8", "OS_location": "SU1560872573", "Lat_long": "51.451928;_-1.7767752", "Establishment": "seed_mix", "pH": 8.54, "EC": 66.9, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 7549648.200000047}, {"id": "Jemma_9", "metadata": {"Year_est": "2015", "Age": "6", "OS_location": "SU1669072674", "Lat_long": "51.452806;_-1.7611995", "Establishment": "seed_mix", "pH": 8.22, "EC": 104.9, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 7778348.030000046}, {"id": "HomeFarm_WoodlandTrust_Hampshire_good_1c", "metadata": {"Year_est": "1994", "Age": "27", "OS_location": "SU6579941829", "Lat_long": "51.171925;_-1.0602025", "Establishment": "seed_mix", "pH": 6.62, "EC": 28.4, "Cutting": "no", "Cattle": "yes", "Sheep": "no", "Plough": "no", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 7758066.0699999835}, {"id": "Crux_easton_70b1", "metadata": {"Year_est": "2000", "Age": "21", "OS_location": "SU4192556251", "Lat_long": "51.303843;_-1.3999827", "Establishment": "seed_mix", "pH": 7.78, "EC": 80.7, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 7962432.440000096}, {"id": "Crux_easton_70b2", "metadata": {"Year_est": "2002", "Age": "19", "OS_location": "SU4195056550", "Lat_long": "51.306529;_-1.399589", "Establishment": "seed_mix", "pH": 8.4, "EC": 76.3, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 7740582.529999939}, {"id": "Martin_Down_arabel_reversion", "metadata": {"Year_est": "1957", "Age": "64", "OS_location": "SU0390520162", "Lat_long": "50.980853;_-1.9457471", "Establishment": "Natural_regen", "pH": 8.23, "EC": 115.8, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "1940-60", "Age_group": "61-70", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 7835839.120000089}, {"id": "Parsonage_down_reversion", "metadata": {"Year_est": "1945", "Age": "76", "OS_location": "SU0610341686", "Lat_long": "51.174381;_-1.9140803", "Establishment": "Natural_regen", "pH": 8.12, "EC": 89.8, "Cutting": "no", "Cattle": "yes", "Sheep": "no", "Plough": "yes", "Year_group": "1940-60", "Age_group": "71-100", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 7761821.930000054}, {"id": "TARGET_MartinDown", "metadata": {"Year_est": "old", "Age": ">100", "OS_location": "SU0558918665", "Lat_long": "50.967378;_-1.9217813", "Establishment": "Natural_regen", "pH": 8.05, "EC": 104.9, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "unknown", "Year_group": null, "Age_group": "100+", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 7896168.259999923}, {"id": "TARGET_St_Catherines", "metadata": {"Year_est": "old", "Age": ">100", "OS_location": "SU4832527522", "Lat_long": "51.045025;_-1.3120365", "Establishment": "Natural_regen", "pH": 7.95, "EC": 184.8, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "unknown", "Year_group": null, "Age_group": "100+", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 7993839.299999955}, {"id": "TARGET_ParsonageDown", "metadata": {"Year_est": "old", "Age": ">100", "OS_location": "SU0552141345", "Lat_long": "51.17132;_-1.9224106", "Establishment": "Natural_regen", "pH": 8.06, "EC": 112.3, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "unknown", "Year_group": null, "Age_group": "100+", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 7766866.430000038}, {"id": "TARGET_KNEPP_A_New_Barn_Field", "metadata": {"Year_est": "2006", "Age": "15", "OS_location": "TQ1420019600", "Lat_long": "50.964513;_-0.3751305", "Establishment": "Natural_regen", "pH": 6.72, "EC": 48.7, "Cutting": "no", "Cattle": "yes", "Sheep": "no", "Plough": "unknown", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 7491757.420000056}, {"id": "Knepp_Pond_field", "metadata": {"Year_est": "2003", "Age": "18", "OS_location": "TQ1410019300", "Lat_long": "50.961836;_-0.3766479", "Establishment": "Natural_regen", "pH": 6.62, "EC": 23.5, "Cutting": "no", "Cattle": "yes", "Sheep": "no", "Plough": "unknown", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 7895704.400000007}, {"id": "Knepp_Benton_field", "metadata": {"Year_est": "2005", "Age": "16", "OS_location": "TQ1450019800", "Lat_long": "50.966251;_-0.37079737", "Establishment": "Natural_regen", "pH": 6.52, "EC": 27.6, "Cutting": "no", "Cattle": "yes", "Sheep": "no", "Plough": "unknown", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 7154627.519999993}]}, {"transform": [{"type": "aggregate", "groupby": ["selectedCategory"]}], "name": "groupedBySelectedCategory", "source": "table"}, {"transform": [{"expr": "datum.frequency >= samplingDepth", "type": "filter"}, {"type": "aggregate", "groupby": ["selectedCategory"]}], "name": "groupedBySelectedCategoryAndRetained", "source": "table"}], "signals": [{"name": "width", "value": "", "bind": {"input": "text"}, "on": [{"events": {"source": "window", "type": "resize"}, "update": "containerSize()[0]"}]}, {"name": "chartHeight", "update": "width / 2.5"}, {"name": "chartOffset", "value": 20}, {"name": "height", "update": "chartHeight + chartOffset"}, {"name": "tooltip", "value": {}, "on": [{"events": "rect:mouseover", "update": "datum"}, {"events": "rect:mouseout", "update": "{}"}]}, {"bind": {"input": "select", "options": ["Year_est", "Age", "OS_location", "Lat_long", "Establishment", "pH", "EC", "Cutting", "Cattle", "Sheep", "Plough", "Year_group", "Age_group", "Age_binary", "pH_binary"], "element": "#metadata-category"}, "name": "category", "value": "Year_est"}, {"bind": {"input": "range", "element": "#sampling-depth-slider", "max": 8361406, "min": 0, "step": 1}, "name": "samplingDepth", "value": 0}], "marks": [{"description": "Interactive rarefaction summary plot", "name": "rarefactionplot", "type": "group", "encode": {"enter": {"x": {"value": 0}, "y": {"signal": "chartOffset"}, "width": {"value": 200}, "height": {"signal": "chartHeight"}}}, "marks": [{"type": "rect", "from": {"data": "groupedBySelectedCategory"}, "encode": {"enter": {"x": {"scale": "xscale", "field": "selectedCategory"}, "width": {"scale": "xscale", "band": 1}, "y": {"scale": "yscale", "field": "count"}, "y2": {"scale": "yscale", "value": 0}}, "update": {"tooltip": {"signal": "{'title': datum.selectedCategory, 'Total Samples': datum.count}"}, "fill": {"value": "#D3D3D3"}, "x": {"scale": "xscale", "field": "selectedCategory"}, "width": {"scale": "xscale", "band": 1}, "y": {"scale": "yscale", "field": "count"}, "y2": {"scale": "yscale", "value": 0}}}}, {"type": "rect", "from": {"data": "groupedBySelectedCategoryAndRetained"}, "encode": {"enter": {"x": {"scale": "xscale", "field": "selectedCategory"}, "width": {"scale": "xscale", "band": 1}, "y": {"scale": "yscale", "field": "count"}, "y2": {"scale": "yscale", "value": 0}}, "update": {"tooltip": {"signal": "{'title': datum.selectedCategory, 'Samples Retained': datum.count}"}, "x": {"scale": "xscale", "field": "selectedCategory"}, "width": {"scale": "xscale", "band": 1}, "y": {"scale": "yscale", "field": "count"}, "y2": {"scale": "yscale", "value": 0}, "fill": {"value": "#1F77B4"}}, "hover": {"fill": {"value": "#60B3F7"}}}}, {"type": "text", "encode": {"enter": {"align": {"value": "center"}, "baseline": {"value": "top"}, "fill": {"value": "#000000"}}, "update": {"x": {"scale": "xscale", "signal": "tooltip.selectedCategory", "band": 0.5}, "y": {"scale": "yscale", "signal": "tooltip.count", "offset": -12}, "text": {"signal": "tooltip.count"}, "fillOpacity": [{"test": "datum === tooltip", "value": 0}, {"value": 1}]}}}], "scales": [{"name": "xscale", "type": "band", "domain": {"data": "groupedBySelectedCategory", "field": "selectedCategory", "sort": true}, "range": "width", "padding": 0.1, "round": true}, {"name": "yscale", "domain": {"fields": [{"data": "groupedBySelectedCategory", "field": "count"}]}, "nice": true, "range": [{"signal": "chartHeight"}, 0]}], "axes": [{"orient": "bottom", "scale": "xscale", "title": {"signal": "category"}, "labelAngle": 90, "labelAlign": "left", "labelBaseline": "middle"}, {"orient": "left", "scale": "yscale", "title": "Number of Samples", "tickMinStep": 1}]}]}
</script>

<script type="text/javascript">
  $(document).ready(function() {
    var spec = JSON.parse(document.getElementById("spec").innerHTML);

    // Try and come up with a good initial estimate of plot dimensions,
    // based on the browser dimensions.
    var opts = {
      width: $("#plot").width(),
      height: $("#plot").width() / 2.5
    };

    vegaEmbed("#plot", spec, opts)
      .then(function(result) {
        result.view.logLevel(vega.Warn);
        // Stash the view object in global namespace for debugging purposes.
        // Check out https://vega.github.io/vega/docs/api/debugging/
        // for more details.
        window.v = result.view;
      })
      .catch(function(error) {
        // From 'js-error-handler.html'
        handleErrors([error], $("#plot"));
      });

    // Clean up the vega-embed toolbar
    var toolbar = $("div .vega-actions").detach();
    toolbar.addClass("btn-group");
    toolbar.children("a").each(function() {
      // NOTE: We're just skipping this bit until we get the plot working with
      // Vega 5
      if(this.innerHTML == "Open in Vega Editor"){
        this.remove()
        return true
      }
      $(this).addClass("btn btn-default");
    });

    toolbar.appendTo("#toolbar");

    var category = $("#metadata-category .vega-bind");
    category
      .children(".vega-bind-name")
      .replaceWith("<label> Metadata Category &nbsp;</label>");
    category.children("select").addClass("form-control");

    var samplingDepthSlider = $("#sampling-depth-slider .vega-bind");
    $(samplingDepthSlider)
      .find("label")
      .remove();
    $(samplingDepthSlider)
      .find("input")
      .attr("id", "range-slider");
    $(samplingDepthSlider)
      .find("input")
      .attr("oninput", "sliderHelperFunction(this.value);");
    $(samplingDepthSlider).prepend(
      "<label> Sampling Depth &nbsp; </label> <br>"
    );
    $(samplingDepthSlider).append(
      '<br> <input id="text-box" class="form-control" type="number" value="0" min="0" oninput="textBoxHelperFunction(this.value);" />'
    );
    $(samplingDepthSlider).append("(zero implies no even sampling)");
    samplingDepthSlider.children(".vega-bind-name").replaceWith("");

    var rotateLabels = $("#rotate-labels .vega-bind");
    rotateLabels
      .children(".vega-bind-name")
      .replaceWith("<label> Rotate Labels &nbsp;</label>");
    rotateLabels.children("checkbox").addClass("form-control");
  });
</script>


<div class="row">
  <div class="col-lg-8">
    <table id="feature-table" class="table table-striped">
      <thead>
        <tr>
          <th scope="col">Sample ID</th>
          <th scope="col">Frequency</th>
        </tr>
      </thead>
      <tbody id="table-body"></tbody>
    </table>
  </div>
</div>

<script id="table-data" type="application/json">
{"Frequency":{"Whitelands_2018_19_":7553581.250000014,"Castle_Field_West__W_":7801936.3000000725,"Toposcope_Field_-_1980s":7797353.7299999669,"Bradenham_post-1986_b":7388391.6400000369,"Lardon_Chase_The_Holies_motorcycle":7556393.9599999413,"Stonehenge_2000_2017a":7662724.8900000108,"Stonehenge_2003_2017b":7609666.9200000158,"Stonehenge_2009":7675633.1900000237,"Stonehenge_2007_2016":7579939.739999976,"Stonehenge_2005":7559864.7400000254,"Stonehenge_2002_2017":7816140.000000013,"Stonehenge_2010":7623826.6299999878,"Stonehenge_2011":7599838.2900000196,"Stonehenge_-_Luxenborough_BankB":7531607.890000022,"Watlington_natural_reversion":7408639.4199999487,"St_Catherines_A3":7709164.2000000272,"HARLEY_FARMS_Chittern":7733095.3100000098,"HARLEY_FARMS_New1":7669658.7100000372,"HARLEY_FARMS_new2b":7626266.5800000038,"WINDMILL_farm":7674077.280000018,"DRUIDS":7803847.2199999504,"Stratton_Wood":7657414.4899999471,"WESTMEAD_FARM":7705267.8100000452,"RSPB_orig_green":7900618.6500000805,"RSPB_churchil":7798274.7799999462,"RSPB_junction":7735430.1799999783,"RSPB_Mainline":7728649.8599999938,"Baltic_farm_1":7945424.3600000804,"Baltic_farm_2":7793736.5499999663,"WestEndFarm":8059060.1899999352,"HorntonHouseFarm_1_parallel":7776423.0799999889,"TownsendFarm_1":7741096.7399999443,"TownsendFarm_2":7719931.0200000508,"TownsendFarm_3_big":7771690.3599999687,"ChurchFarm":7866751.2300000135,"StowellFarms_1_adj":8361406.2099999916,"MannorFmAltonBarnes":7596872.2500000745,"HommingtonFarm":7879301.3300000522,"ThropeManor_1":8325472.1900000582,"ThropeManor_2":7940337.3300000187,"ThropeManor_3":7941162.5199999092,"MannorFmBroadChalke":7796117.0099999728,"BigleyFm_1":7972347.0899999812,"BigleyFm_2":7653874.069999963,"NorringtonMannorFm_1":7850550.9899999527,"NorringtonMannorFm_2":7866912.7900000559,"ManorFmBerwickStJohn_1":8127307.0300000412,"ManorFmBerwickStJohn_3":8006661.1199999303,"Jemma_1":7555349.0800000457,"Jemma_2":7740751.8100000173,"Jemma_7":7766121.3299999675,"Jemma_4":7665493.149999992,"Jemma_5":7657356.2500000559,"Jemma_6":7549648.2000000468,"Jemma_9":7778348.0300000459,"HomeFarm_WoodlandTrust_Hampshire_good_1c":7758066.0699999835,"Crux_easton_70b1":7962432.4400000963,"Crux_easton_70b2":7740582.5299999388,"Martin_Down_arabel_reversion":7835839.1200000886,"Parsonage_down_reversion":7761821.9300000537,"TARGET_MartinDown":7896168.2599999234,"TARGET_St_Catherines":7993839.2999999551,"TARGET_ParsonageDown":7766866.4300000379,"TARGET_KNEPP_A_New_Barn_Field":7491757.4200000558,"Knepp_Pond_field":7895704.4000000069,"Knepp_Benton_field":7154627.519999993}}
</script>

<script type="text/javascript">
  var totalFrequencies = 511870512;
  var sampleCount = 66;
  var defaultDescription = "Retained " + (totalFrequencies.toLocaleString('en'))
                                       + " (100.00%) features in "
                                       + sampleCount + " (100.00%) samples at the specifed sampling depth.";


  var textField = document.getElementById('text-field');
  var tableBody = document.getElementById("table-body");
  var table = document.getElementById("feature-table");

  // when the viz loads the default description is displayed
  textField.innerHTML = defaultDescription;

  let sampleTable = JSON.parse(document.getElementById("table-data").innerHTML);
  let sampleFrequencies = sampleTable["Frequency"];
  // get object keys and store them in an ascending order based on the key value
  // this order is used to create the table rows
  sortedSampleIDs = Object.keys(sampleFrequencies).sort(function(a, b) {
    return sortIDs(a, b, sampleFrequencies)
  });

  formatTable(tableBody, sampleTable, sortedSampleIDs);

  function updateTableandText(samplingDepth) {
    let retainedSampleCount = 0;

    // start the counter at 1 to ignore the header row
    for (var i = 1; row = table.rows[i]; i++) {
      // The value in table is formatted as a string for display to the user,
      // but the value in sampleFrequencies is formatted as an int for data
      // manipulation, so we use the ID we are on in table to get the frequency
      // from sampleFrequencies.
      const sampleID = row.cells[0].innerText;
      const sampleFrequency = sampleFrequencies[sampleID];

      if (sampleFrequency < samplingDepth) {
        row.className = "danger";
      } else {
        row.className = "";
        retainedSampleCount += 1;
      }
    }
    if (samplingDepth == 0){
      textField.innerHTML = defaultDescription;
    }
    else{
      var retainedFeatureCount = retainedSampleCount * samplingDepth;
      textField.innerHTML = "Retained " + formatter.format(retainedFeatureCount)
                                        + " (" + (retainedFeatureCount/totalFrequencies*100).toFixed(2) + "%) features in "
                                        + retainedSampleCount + " (" + (retainedSampleCount/sampleCount*100).toFixed(2)
                                        +  "%) samples at the specifed sampling depth.";
    }
  }


  function updateSliderVal(val) {
    var slider = document.getElementById("range-slider");
    slider.value = val;
    slider.dispatchEvent(new Event("change"));
    slider.dispatchEvent(new Event("input"));
  }


  function updateBoxVal(val) {
    var num = document.getElementById("text-box");
    num.value = val;
  }


  function sliderHelperFunction(val){
    updateBoxVal(val);
    updateTableandText(val);
  }


  function textBoxHelperFunction(val){
    val = parseInt(val);
    if (val !== val) {
      val = 0;
    }

    // make sure the value in the textbox cannot exceed the max count
    if (val > 8361406.209999992){
      var num = document.getElementById("text-box");
      num.value = 8361406.209999992;
    }
    updateSliderVal(val);
  }
</script>


    </div>
  </div>


    </div>
    <script type="text/javascript">
      if (window.frameElement) {
          document.getElementById('q2templatesheader').remove();
      }
    </script>
    

  </body>
</html>