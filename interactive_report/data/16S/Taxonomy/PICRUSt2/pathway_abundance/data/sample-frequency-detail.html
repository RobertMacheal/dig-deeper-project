<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>q2_feature_table : summarize</title>
    <link rel="stylesheet" href="./q2templateassets/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="./q2templateassets/css/normalize.css"/>
    <link rel="stylesheet" href="./q2templateassets/css/base-template.css"/>
    <script src="./q2templateassets/js/jquery-3.2.0.min.js" charset="utf-8"></script>
    <script src="./q2templateassets/js/bootstrap.min.js" charset="utf-8"></script>
    
<script src="js/vega.min.js"></script>
<script src="js/vega-embed.min.js"></script>
<script src="util.js"></script>
<link rel="stylesheet" type="text/css" href="css/spinkit.css" /> 
  </head>
  <body>
    <div class="container-fluid">
      <div id="q2templatesheader" class="row">
        <div class="col-lg-12">
          <a href="http://qiime2.org/">
            <img src="./q2templateassets/img/qiime2-rect-200.png"
            alt="QIIME 2">
          </a>
        </div>
      </div>
        

  <div class="row">
    <div class="col-lg-12">
      <ul class="nav nav-tabs">
        
          <li class="">
            <a href="index.html">
              Overview
            </a>
          </li>
        
          <li class="active">
            <a href="sample-frequency-detail.html">
              Interactive Sample Detail
            </a>
          </li>
        
          <li class="">
            <a href="feature-frequency-detail.html">
              Feature Detail
            </a>
          </li>
        
      </ul>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-12">
      


<div class="row">

  <div class="col-lg-8">
    <div id="plot">
      <div id="loading" class="spinner">
        <div class="rect1"></div>
        <div class="rect2"></div>
        <div class="rect3"></div>
        <div class="rect4"></div>
        <div class="rect5"></div>
      </div>
    </div>
  </div>

  <div class="col-lg-4">
    <div class="row">
      <div class="col-lg-12">
        <h3>Plot Controls</h3>
      </div>
    </div>

    <div class="row">
      <div class="col-lg-12" id="toolbar"></div>
    </div>

    <div class="row">
      <div class="col-lg-12" id="metadata-category"></div>
    </div>

    <div class="row">
      <div class="col-lg-12" id="sampling-depth-slider"></div>
    </div>

    <div class="row">
      <div class="col-lg-12" id="text-field"></div>
    </div>
  </div>

</div>






<script type="text/javascript">
  function handleErrors(errors, element, msg) {
    console.error(errors);
    msg = msg === undefined ? '' : msg + '<br><br>';
    var helpMsg = '<p class="alert alert-danger"> \
                   There was an error loading and rendering the \
                   visualization.<br><br>' + msg + 'Please \
                   copy-and-paste the following error messages when \
                   reporting this error (please be aware that the content \
                   of your analysis data and/or metadata is included in \
                   these messages):</p>';
    var helpMsgDiv = $('<div></div>');
    helpMsgDiv.append(helpMsg);
    helpMsgDiv.append('<pre><code>' + errors.join('\n\n') + '</code></pre>');
    element.replaceWith(helpMsgDiv);
  }
  window.onerror = function(error) {
    handleErrors([error], $('#loading'));
  };
</script>
<script id="spec" type="application/json">
{"$schema": "https://vega.github.io/schema/vega/v5.json", "autosize": {"contains": "content", "type": "fit-x", "resize": true}, "width": 800, "data": [{"transform": [{"as": "selectedCategory", "expr": "datum.metadata[category]", "type": "formula"}], "name": "table", "values": [{"id": "Whitelands_2018_19_", "metadata": {"Year_est": "2018", "Age": "3", "OS_location": "SU2990087100", "Lat_long": "51.581972;_-1.5698756", "Establishment": "seed_mix", "pH": 8.03, "EC": 136.4, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 1689248.6233830815}, {"id": "Castle_Field_West__W_", "metadata": {"Year_est": "2002", "Age": "19", "OS_location": "SU2950086200", "Lat_long": "51.573901;_-1.5757235", "Establishment": "seed_mix", "pH": 7.93, "EC": 139.3, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 1751843.298399194}, {"id": "Toposcope_Field_-_1980s", "metadata": {"Year_est": "1985", "Age": "36", "OS_location": "SU2950086600", "Lat_long": "51.577497;_-1.5756901", "Establishment": "Natural_regen", "pH": 7.94, "EC": 139.7, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "1981-2000", "Age_group": "31-40", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 1754048.465398567}, {"id": "Bradenham_post-1986_b", "metadata": {"Year_est": "1986", "Age": "35", "OS_location": "SU8290097718", "Lat_long": "51.672127;_-0.80258692", "Establishment": "seed_mix", "pH": 7.84, "EC": 151.7, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "1981-2000", "Age_group": "31-40", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 1629916.7223913937}, {"id": "Lardon_Chase_The_Holies_motorcycle", "metadata": {"Year_est": "2007", "Age": "14", "OS_location": "SU5930079800", "Lat_long": "51.514021;_-1.1468383", "Establishment": "Natural_regen", "pH": 7.94, "EC": 135.7, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 1690949.0234031337}, {"id": "Stonehenge_2000_2017a", "metadata": {"Year_est": "2000", "Age": "21", "OS_location": "SU1370042400", "Lat_long": "51.180671;_-1.8053828", "Establishment": "Green_hay_bush", "pH": 7.88, "EC": 144.3, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 1700776.8782798357}, {"id": "Stonehenge_2003_2017b", "metadata": {"Year_est": "2003", "Age": "18", "OS_location": "SU1150041600", "Lat_long": "51.173525;_-1.8368821", "Establishment": "Green_hay_bush", "pH": 7.69, "EC": 184.4, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 1679547.5111082797}, {"id": "Stonehenge_2009", "metadata": {"Year_est": "2009", "Age": "12", "OS_location": "SU1050041700", "Lat_long": "51.174443;_-1.8511833", "Establishment": "Green_hay_bush", "pH": 7.82, "EC": 156.5, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 1689706.7826880205}, {"id": "Stonehenge_2007_2016", "metadata": {"Year_est": "2007", "Age": "14", "OS_location": "SU1100041900", "Lat_long": "51.176233;_-1.8440251", "Establishment": "Green_hay_bush", "pH": 7.87, "EC": 158.8, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 1668579.5385414297}, {"id": "Stonehenge_2005", "metadata": {"Year_est": "2005", "Age": "16", "OS_location": "SU1140042200", "Lat_long": "51.178922;_-1.8382937", "Establishment": "Green_hay_bush", "pH": 7.85, "EC": 145.0, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 1667540.478702873}, {"id": "Stonehenge_2002_2017", "metadata": {"Year_est": "2002", "Age": "19", "OS_location": "SU1480043200", "Lat_long": "51.187837;_-1.7896132", "Establishment": "Green_hay_bush", "pH": 7.91, "EC": 130.3, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 1720193.4584153695}, {"id": "Stonehenge_2010", "metadata": {"Year_est": "2010", "Age": "11", "OS_location": "SU1070043000", "Lat_long": "51.186129;_-1.8482842", "Establishment": "Green_hay_bush", "pH": 7.69, "EC": 202.0, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 1694510.1171606353}, {"id": "Stonehenge_2011", "metadata": {"Year_est": "2011", "Age": "10", "OS_location": "SU1050043600", "Lat_long": "51.191528;_-1.8511284", "Establishment": "Green_hay_bush", "pH": 7.85, "EC": 174.3, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 1678429.8383085248}, {"id": "Stonehenge_-_Luxenborough_BankB", "metadata": {"Year_est": "2000", "Age": "21", "OS_location": "SU1290041900", "Lat_long": "51.176193;_-1.8168457", "Establishment": "Green_hay_bush", "pH": 7.78, "EC": 186.6, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 1669034.8369775089}, {"id": "Watlington_natural_reversion", "metadata": {"Year_est": "2000", "Age": "21", "OS_location": "SU7050293600", "Lat_long": "51.636798;_-0.98266944", "Establishment": "Natural_regen", "pH": 7.8, "EC": 147.5, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 1644018.1947028702}, {"id": "St_Catherines_A3", "metadata": {"Year_est": "1994", "Age": "27", "OS_location": "SU4812327449", "Lat_long": "51.044386;_-1.3149275", "Establishment": "Green_hay_bush", "pH": 7.63, "EC": 222.0, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 1681133.0713350952}, {"id": "HARLEY_FARMS_Chittern", "metadata": {"Year_est": "2013", "Age": "8", "OS_location": "ST9762044730", "Lat_long": "51.201778;_-2.0354461", "Establishment": "seed_mix", "pH": 7.77, "EC": 197.9, "Cutting": "yes", "Cattle": "yes", "Sheep": "no", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 1719562.4664928033}, {"id": "HARLEY_FARMS_New1", "metadata": {"Year_est": "2020", "Age": "1", "OS_location": "ST9346829822", "Lat_long": "51.067692;_-2.0945983", "Establishment": "seed_mix", "pH": 7.84, "EC": 144.1, "Cutting": "no", "Cattle": "yes", "Sheep": "no", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 1703327.843856479}, {"id": "HARLEY_FARMS_new2b", "metadata": {"Year_est": "2020", "Age": "1", "OS_location": "ST9242629613", "Lat_long": "51.065799;_-2.1094648", "Establishment": "seed_mix", "pH": 7.09, "EC": 102.5, "Cutting": "yes", "Cattle": "no", "Sheep": "no", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 1713046.8139703136}, {"id": "WINDMILL_farm", "metadata": {"Year_est": "1990", "Age": "31", "OS_location": "SU7176229761", "Lat_long": "51.06271;_-0.97732036", "Establishment": "seed_mix", "pH": 7.32, "EC": 210.0, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "1981-2000", "Age_group": "31-40", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 1721566.426006971}, {"id": "DRUIDS", "metadata": {"Year_est": "2002", "Age": "19", "OS_location": "SU2964250324", "Lat_long": "51.251319;_-1.5766624", "Establishment": "seed_mix", "pH": 7.14, "EC": 176.3, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 1732767.6589238497}, {"id": "Stratton_Wood", "metadata": {"Year_est": "1995", "Age": "26", "OS_location": "SU1647289260", "Lat_long": "51.601942;_-1.7635665", "Establishment": "seed_mix", "pH": 7.41, "EC": 126.8, "Cutting": "yes", "Cattle": "no", "Sheep": "no", "Plough": "yes", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 1690518.6581963268}, {"id": "WESTMEAD_FARM", "metadata": {"Year_est": "2000", "Age": "21", "OS_location": "SU6317525168", "Lat_long": "51.022422;_-1.1006408", "Establishment": "seed_mix", "pH": 7.75, "EC": 159.0, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 1710005.8602624112}, {"id": "RSPB_orig_green", "metadata": {"Year_est": "2006", "Age": "15", "OS_location": "SU2135640329", "Lat_long": "51.161815;_-1.6959767", "Establishment": "Green_hay_bush", "pH": 7.99, "EC": 138.1, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 1765342.3999135334}, {"id": "RSPB_churchil", "metadata": {"Year_est": "2010", "Age": "11", "OS_location": "SU2075340336", "Lat_long": "51.1619;_-1.7045994", "Establishment": "Green_hay_bush", "pH": 8.01, "EC": 116.8, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 1735316.9763947134}, {"id": "RSPB_junction", "metadata": {"Year_est": "2007", "Age": "14", "OS_location": "SU2267739280", "Lat_long": "51.152332;_-1.6771517", "Establishment": "Green_hay_bush", "pH": 8.41, "EC": 24.6, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 1731860.3261830339}, {"id": "RSPB_Mainline", "metadata": {"Year_est": "2016", "Age": "5", "OS_location": "SU2250539212", "Lat_long": "51.151728;_-1.6796151", "Establishment": "Green_hay_bush", "pH": 8.48, "EC": 23.4, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 1721354.0992084185}, {"id": "Baltic_farm_1", "metadata": {"Year_est": "2005", "Age": "16", "OS_location": "SU0459767825", "Lat_long": "51.40943;_-1.9352946", "Establishment": "Green_hay_bush", "pH": 7.94, "EC": 29.2, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 1724545.402101376}, {"id": "Baltic_farm_2", "metadata": {"Year_est": "1998", "Age": "23", "OS_location": "SU0306867167", "Lat_long": "51.403524;_-1.9572835", "Establishment": "Green_hay_bush", "pH": 8.27, "EC": 29.6, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 1739999.7060208616}, {"id": "WestEndFarm", "metadata": {"Year_est": "2019", "Age": "2", "OS_location": "SU0297366901", "Lat_long": "51.401133;_-1.9586514", "Establishment": "Green_hay_bush", "pH": 8.44, "EC": 24.1, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 1781476.4237116163}, {"id": "HorntonHouseFarm_1_parallel", "metadata": {"Year_est": "2016", "Age": "5", "OS_location": "SU0584565118", "Lat_long": "51.385079;_-1.917395", "Establishment": "seed_mix", "pH": 8.6, "EC": 29.5, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 1714305.5506361462}, {"id": "TownsendFarm_1", "metadata": {"Year_est": "2017", "Age": "4", "OS_location": "SU0775065316", "Lat_long": "51.386837;_-1.8900159", "Establishment": "seed_mix", "pH": 8.2, "EC": 36.6, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 1708540.7056494795}, {"id": "TownsendFarm_2", "metadata": {"Year_est": "2010", "Age": "11", "OS_location": "SU0705164722", "Lat_long": "51.381505;_-1.9000725", "Establishment": "seed_mix", "pH": 8.45, "EC": 21.2, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 1724092.2964848685}, {"id": "TownsendFarm_3_big", "metadata": {"Year_est": "2014", "Age": "7", "OS_location": "SU0886965184", "Lat_long": "51.385634;_-1.8739384", "Establishment": "Green_hay_bush", "pH": 7.92, "EC": 42.7, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 1715666.7739849943}, {"id": "ChurchFarm", "metadata": {"Year_est": "2012", "Age": "9", "OS_location": "SU0979864321", "Lat_long": "51.377859;_-1.8606121", "Establishment": "seed_mix", "pH": 8.63, "EC": 20.7, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 1757652.4736368598}, {"id": "StowellFarms_1_adj", "metadata": {"Year_est": "2015", "Age": "6", "OS_location": "SU1362464180", "Lat_long": "51.376513;_-1.8056466", "Establishment": "seed_mix", "pH": 6.6, "EC": 21.8, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 1797155.124996599}, {"id": "MannorFmAltonBarnes", "metadata": {"Year_est": "2012", "Age": "9", "OS_location": "SU1211561331", "Lat_long": "51.35093;_-1.827423", "Establishment": "seed_mix", "pH": 8.07, "EC": 21.6, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 1661193.5792922913}, {"id": "HommingtonFarm", "metadata": {"Year_est": "2014", "Age": "7", "OS_location": "SU1332825982", "Lat_long": "51.033048;_-1.811306", "Establishment": "seed_mix", "pH": 8.22, "EC": 26.3, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 1741989.202784085}, {"id": "ThropeManor_1", "metadata": {"Year_est": "2002", "Age": "19", "OS_location": "SU0886123850", "Lat_long": "51.013962;_-1.8750607", "Establishment": "seed_mix", "pH": 7.54, "EC": 78.1, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 1828095.971276857}, {"id": "ThropeManor_2", "metadata": {"Year_est": "1998", "Age": "23", "OS_location": "SU0843924348", "Lat_long": "51.018447;_-1.8810649", "Establishment": "seed_mix", "pH": 7.73, "EC": 28.8, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 1739905.600395222}, {"id": "ThropeManor_3", "metadata": {"Year_est": "2000", "Age": "21", "OS_location": "SU0901525189", "Lat_long": "51.026001;_-1.8728325", "Establishment": "seed_mix", "pH": 8.13, "EC": 28.5, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 1741769.3116483907}, {"id": "MannorFmBroadChalke", "metadata": {"Year_est": "2010", "Age": "11", "OS_location": "SU0468023121", "Lat_long": "51.007455;_-1.9346701", "Establishment": "Green_hay_bush", "pH": 8.24, "EC": 24.3, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 1742790.2230170367}, {"id": "BigleyFm_1", "metadata": {"Year_est": "2014", "Age": "7", "OS_location": "ST9798720966", "Lat_long": "50.988091;_-2.0300532", "Establishment": "seed_mix", "pH": 8.1, "EC": 31.3, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 1750262.8920610507}, {"id": "BigleyFm_2", "metadata": {"Year_est": "2017", "Age": "4", "OS_location": "ST9796821801", "Lat_long": "50.9956;_-2.0303288", "Establishment": "seed_mix", "pH": 7.35, "EC": 46.8, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 1704327.0946672007}, {"id": "NorringtonMannorFm_1", "metadata": {"Year_est": "2009", "Age": "12", "OS_location": "ST9689721419", "Lat_long": "50.99216;_-2.0455866", "Establishment": "seed_mix", "pH": 7.83, "EC": 33.5, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 1721797.1990893567}, {"id": "NorringtonMannorFm_2", "metadata": {"Year_est": "2009", "Age": "12", "OS_location": "ST9699420390", "Lat_long": "50.982907;_-2.0441957", "Establishment": "seed_mix", "pH": 8.2, "EC": 28.5, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 1731744.9234184758}, {"id": "ManorFmBerwickStJohn_1", "metadata": {"Year_est": "2014", "Age": "7", "OS_location": "ST9468023123", "Lat_long": "51.007466;_-2.0772007", "Establishment": "seed_mix", "pH": 7.47, "EC": 17.83, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 1791909.568399136}, {"id": "ManorFmBerwickStJohn_3", "metadata": {"Year_est": "2018", "Age": "3", "OS_location": "ST9422022841", "Lat_long": "51.004926;_-2.0837525", "Establishment": "seed_mix", "pH": 8.36, "EC": 23.0, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 1774244.1394282852}, {"id": "Jemma_1", "metadata": {"Year_est": "2010", "Age": "11", "OS_location": "SU1405276456", "Lat_long": "51.486882;_-1.7990143", "Establishment": "Green_hay_bush", "pH": 8.31, "EC": 33.5, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 1651728.997924684}, {"id": "Jemma_2", "metadata": {"Year_est": "2008", "Age": "13", "OS_location": "SU1194873670", "Lat_long": "51.46188;_-1.8294093", "Establishment": "Natural_regen", "pH": 7.96, "EC": 104.2, "Cutting": "no", "Cattle": "yes", "Sheep": "no", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 1719411.805219483}, {"id": "Jemma_7", "metadata": {"Year_est": "2014", "Age": "7", "OS_location": "SU1641473039", "Lat_long": "51.456096;_-1.7651546", "Establishment": "Green_hay_bush", "pH": 7.95, "EC": 106.1, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 1721502.116944364}, {"id": "Jemma_4", "metadata": {"Year_est": "2015", "Age": "6", "OS_location": "SU1261971802", "Lat_long": "51.44507;_-1.8198169", "Establishment": "Green_hay_bush", "pH": 7.31, "EC": 145.8, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 1698622.8194125644}, {"id": "Jemma_5", "metadata": {"Year_est": "2015", "Age": "6", "OS_location": "SU1538172691", "Lat_long": "51.452995;_-1.7800368", "Establishment": "seed_mix", "pH": 8.2, "EC": 77.7, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 1721908.118926441}, {"id": "Jemma_6", "metadata": {"Year_est": "2013", "Age": "8", "OS_location": "SU1560872573", "Lat_long": "51.451928;_-1.7767752", "Establishment": "seed_mix", "pH": 8.54, "EC": 66.9, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 1692064.8042974356}, {"id": "Jemma_9", "metadata": {"Year_est": "2015", "Age": "6", "OS_location": "SU1669072674", "Lat_long": "51.452806;_-1.7611995", "Establishment": "seed_mix", "pH": 8.22, "EC": 104.9, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 1716781.9440400747}, {"id": "HomeFarm_WoodlandTrust_Hampshire_good_1c", "metadata": {"Year_est": "1994", "Age": "27", "OS_location": "SU6579941829", "Lat_long": "51.171925;_-1.0602025", "Establishment": "seed_mix", "pH": 6.62, "EC": 28.4, "Cutting": "no", "Cattle": "yes", "Sheep": "no", "Plough": "no", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 1691536.278016237}, {"id": "Crux_easton_70b1", "metadata": {"Year_est": "2000", "Age": "21", "OS_location": "SU4192556251", "Lat_long": "51.303843;_-1.3999827", "Establishment": "seed_mix", "pH": 7.78, "EC": 80.7, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 1785887.592790939}, {"id": "Crux_easton_70b2", "metadata": {"Year_est": "2002", "Age": "19", "OS_location": "SU4195056550", "Lat_long": "51.306529;_-1.399589", "Establishment": "seed_mix", "pH": 8.4, "EC": 76.3, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 1721956.104822348}, {"id": "Martin_Down_arabel_reversion", "metadata": {"Year_est": "1957", "Age": "64", "OS_location": "SU0390520162", "Lat_long": "50.980853;_-1.9457471", "Establishment": "Natural_regen", "pH": 8.23, "EC": 115.8, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "1940-60", "Age_group": "61-70", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 1730861.9716446039}, {"id": "Parsonage_down_reversion", "metadata": {"Year_est": "1945", "Age": "76", "OS_location": "SU0610341686", "Lat_long": "51.174381;_-1.9140803", "Establishment": "Natural_regen", "pH": 8.12, "EC": 89.8, "Cutting": "no", "Cattle": "yes", "Sheep": "no", "Plough": "yes", "Year_group": "1940-60", "Age_group": "71-100", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 1705917.698231195}, {"id": "TARGET_MartinDown", "metadata": {"Year_est": "old", "Age": ">100", "OS_location": "SU0558918665", "Lat_long": "50.967378;_-1.9217813", "Establishment": "Natural_regen", "pH": 8.05, "EC": 104.9, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "unknown", "Year_group": null, "Age_group": "100+", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 1717373.7062527267}, {"id": "TARGET_St_Catherines", "metadata": {"Year_est": "old", "Age": ">100", "OS_location": "SU4832527522", "Lat_long": "51.045025;_-1.3120365", "Establishment": "Natural_regen", "pH": 7.95, "EC": 184.8, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "unknown", "Year_group": null, "Age_group": "100+", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 1692883.4100311182}, {"id": "TARGET_ParsonageDown", "metadata": {"Year_est": "old", "Age": ">100", "OS_location": "SU0552141345", "Lat_long": "51.17132;_-1.9224106", "Establishment": "Natural_regen", "pH": 8.06, "EC": 112.3, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "unknown", "Year_group": null, "Age_group": "100+", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 1718415.161299392}, {"id": "TARGET_KNEPP_A_New_Barn_Field", "metadata": {"Year_est": "2006", "Age": "15", "OS_location": "TQ1420019600", "Lat_long": "50.964513;_-0.3751305", "Establishment": "Natural_regen", "pH": 6.72, "EC": 48.7, "Cutting": "no", "Cattle": "yes", "Sheep": "no", "Plough": "unknown", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 1658566.8639796951}, {"id": "Knepp_Pond_field", "metadata": {"Year_est": "2003", "Age": "18", "OS_location": "TQ1410019300", "Lat_long": "50.961836;_-0.3766479", "Establishment": "Natural_regen", "pH": 6.62, "EC": 23.5, "Cutting": "no", "Cattle": "yes", "Sheep": "no", "Plough": "unknown", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 1711155.2271609015}, {"id": "Knepp_Benton_field", "metadata": {"Year_est": "2005", "Age": "16", "OS_location": "TQ1450019800", "Lat_long": "50.966251;_-0.37079737", "Establishment": "Natural_regen", "pH": 6.52, "EC": 27.6, "Cutting": "no", "Cattle": "yes", "Sheep": "no", "Plough": "unknown", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 1589082.4023675343}]}, {"transform": [{"type": "aggregate", "groupby": ["selectedCategory"]}], "name": "groupedBySelectedCategory", "source": "table"}, {"transform": [{"expr": "datum.frequency >= samplingDepth", "type": "filter"}, {"type": "aggregate", "groupby": ["selectedCategory"]}], "name": "groupedBySelectedCategoryAndRetained", "source": "table"}], "signals": [{"name": "width", "value": "", "bind": {"input": "text"}, "on": [{"events": {"source": "window", "type": "resize"}, "update": "containerSize()[0]"}]}, {"name": "chartHeight", "update": "width / 2.5"}, {"name": "chartOffset", "value": 20}, {"name": "height", "update": "chartHeight + chartOffset"}, {"name": "tooltip", "value": {}, "on": [{"events": "rect:mouseover", "update": "datum"}, {"events": "rect:mouseout", "update": "{}"}]}, {"bind": {"input": "select", "options": ["Year_est", "Age", "OS_location", "Lat_long", "Establishment", "pH", "EC", "Cutting", "Cattle", "Sheep", "Plough", "Year_group", "Age_group", "Age_binary", "pH_binary"], "element": "#metadata-category"}, "name": "category", "value": "Year_est"}, {"bind": {"input": "range", "element": "#sampling-depth-slider", "max": 1828095, "min": 0, "step": 1}, "name": "samplingDepth", "value": 0}], "marks": [{"description": "Interactive rarefaction summary plot", "name": "rarefactionplot", "type": "group", "encode": {"enter": {"x": {"value": 0}, "y": {"signal": "chartOffset"}, "width": {"value": 200}, "height": {"signal": "chartHeight"}}}, "marks": [{"type": "rect", "from": {"data": "groupedBySelectedCategory"}, "encode": {"enter": {"x": {"scale": "xscale", "field": "selectedCategory"}, "width": {"scale": "xscale", "band": 1}, "y": {"scale": "yscale", "field": "count"}, "y2": {"scale": "yscale", "value": 0}}, "update": {"tooltip": {"signal": "{'title': datum.selectedCategory, 'Total Samples': datum.count}"}, "fill": {"value": "#D3D3D3"}, "x": {"scale": "xscale", "field": "selectedCategory"}, "width": {"scale": "xscale", "band": 1}, "y": {"scale": "yscale", "field": "count"}, "y2": {"scale": "yscale", "value": 0}}}}, {"type": "rect", "from": {"data": "groupedBySelectedCategoryAndRetained"}, "encode": {"enter": {"x": {"scale": "xscale", "field": "selectedCategory"}, "width": {"scale": "xscale", "band": 1}, "y": {"scale": "yscale", "field": "count"}, "y2": {"scale": "yscale", "value": 0}}, "update": {"tooltip": {"signal": "{'title': datum.selectedCategory, 'Samples Retained': datum.count}"}, "x": {"scale": "xscale", "field": "selectedCategory"}, "width": {"scale": "xscale", "band": 1}, "y": {"scale": "yscale", "field": "count"}, "y2": {"scale": "yscale", "value": 0}, "fill": {"value": "#1F77B4"}}, "hover": {"fill": {"value": "#60B3F7"}}}}, {"type": "text", "encode": {"enter": {"align": {"value": "center"}, "baseline": {"value": "top"}, "fill": {"value": "#000000"}}, "update": {"x": {"scale": "xscale", "signal": "tooltip.selectedCategory", "band": 0.5}, "y": {"scale": "yscale", "signal": "tooltip.count", "offset": -12}, "text": {"signal": "tooltip.count"}, "fillOpacity": [{"test": "datum === tooltip", "value": 0}, {"value": 1}]}}}], "scales": [{"name": "xscale", "type": "band", "domain": {"data": "groupedBySelectedCategory", "field": "selectedCategory", "sort": true}, "range": "width", "padding": 0.1, "round": true}, {"name": "yscale", "domain": {"fields": [{"data": "groupedBySelectedCategory", "field": "count"}]}, "nice": true, "range": [{"signal": "chartHeight"}, 0]}], "axes": [{"orient": "bottom", "scale": "xscale", "title": {"signal": "category"}, "labelAngle": 90, "labelAlign": "left", "labelBaseline": "middle"}, {"orient": "left", "scale": "yscale", "title": "Number of Samples", "tickMinStep": 1}]}]}
</script>

<script type="text/javascript">
  $(document).ready(function() {
    var spec = JSON.parse(document.getElementById("spec").innerHTML);

    // Try and come up with a good initial estimate of plot dimensions,
    // based on the browser dimensions.
    var opts = {
      width: $("#plot").width(),
      height: $("#plot").width() / 2.5
    };

    vegaEmbed("#plot", spec, opts)
      .then(function(result) {
        result.view.logLevel(vega.Warn);
        // Stash the view object in global namespace for debugging purposes.
        // Check out https://vega.github.io/vega/docs/api/debugging/
        // for more details.
        window.v = result.view;
      })
      .catch(function(error) {
        // From 'js-error-handler.html'
        handleErrors([error], $("#plot"));
      });

    // Clean up the vega-embed toolbar
    var toolbar = $("div .vega-actions").detach();
    toolbar.addClass("btn-group");
    toolbar.children("a").each(function() {
      // NOTE: We're just skipping this bit until we get the plot working with
      // Vega 5
      if(this.innerHTML == "Open in Vega Editor"){
        this.remove()
        return true
      }
      $(this).addClass("btn btn-default");
    });

    toolbar.appendTo("#toolbar");

    var category = $("#metadata-category .vega-bind");
    category
      .children(".vega-bind-name")
      .replaceWith("<label> Metadata Category &nbsp;</label>");
    category.children("select").addClass("form-control");

    var samplingDepthSlider = $("#sampling-depth-slider .vega-bind");
    $(samplingDepthSlider)
      .find("label")
      .remove();
    $(samplingDepthSlider)
      .find("input")
      .attr("id", "range-slider");
    $(samplingDepthSlider)
      .find("input")
      .attr("oninput", "sliderHelperFunction(this.value);");
    $(samplingDepthSlider).prepend(
      "<label> Sampling Depth &nbsp; </label> <br>"
    );
    $(samplingDepthSlider).append(
      '<br> <input id="text-box" class="form-control" type="number" value="0" min="0" oninput="textBoxHelperFunction(this.value);" />'
    );
    $(samplingDepthSlider).append("(zero implies no even sampling)");
    samplingDepthSlider.children(".vega-bind-name").replaceWith("");

    var rotateLabels = $("#rotate-labels .vega-bind");
    rotateLabels
      .children(".vega-bind-name")
      .replaceWith("<label> Rotate Labels &nbsp;</label>");
    rotateLabels.children("checkbox").addClass("form-control");
  });
</script>


<div class="row">
  <div class="col-lg-8">
    <table id="feature-table" class="table table-striped">
      <thead>
        <tr>
          <th scope="col">Sample ID</th>
          <th scope="col">Frequency</th>
        </tr>
      </thead>
      <tbody id="table-body"></tbody>
    </table>
  </div>
</div>

<script id="table-data" type="application/json">
{"Frequency":{"Whitelands_2018_19_":1689248.6233830815,"Castle_Field_West__W_":1751843.2983991939,"Toposcope_Field_-_1980s":1754048.465398567,"Bradenham_post-1986_b":1629916.7223913937,"Lardon_Chase_The_Holies_motorcycle":1690949.0234031337,"Stonehenge_2000_2017a":1700776.8782798357,"Stonehenge_2003_2017b":1679547.5111082797,"Stonehenge_2009":1689706.7826880205,"Stonehenge_2007_2016":1668579.5385414297,"Stonehenge_2005":1667540.478702873,"Stonehenge_2002_2017":1720193.4584153695,"Stonehenge_2010":1694510.1171606353,"Stonehenge_2011":1678429.8383085248,"Stonehenge_-_Luxenborough_BankB":1669034.8369775089,"Watlington_natural_reversion":1644018.1947028702,"St_Catherines_A3":1681133.0713350952,"HARLEY_FARMS_Chittern":1719562.4664928033,"HARLEY_FARMS_New1":1703327.843856479,"HARLEY_FARMS_new2b":1713046.8139703136,"WINDMILL_farm":1721566.4260069709,"DRUIDS":1732767.6589238497,"Stratton_Wood":1690518.6581963268,"WESTMEAD_FARM":1710005.8602624112,"RSPB_orig_green":1765342.3999135334,"RSPB_churchil":1735316.9763947134,"RSPB_junction":1731860.3261830339,"RSPB_Mainline":1721354.0992084185,"Baltic_farm_1":1724545.4021013761,"Baltic_farm_2":1739999.7060208616,"WestEndFarm":1781476.4237116163,"HorntonHouseFarm_1_parallel":1714305.5506361462,"TownsendFarm_1":1708540.7056494795,"TownsendFarm_2":1724092.2964848685,"TownsendFarm_3_big":1715666.7739849943,"ChurchFarm":1757652.4736368598,"StowellFarms_1_adj":1797155.124996599,"MannorFmAltonBarnes":1661193.5792922913,"HommingtonFarm":1741989.2027840849,"ThropeManor_1":1828095.971276857,"ThropeManor_2":1739905.600395222,"ThropeManor_3":1741769.3116483907,"MannorFmBroadChalke":1742790.2230170367,"BigleyFm_1":1750262.8920610507,"BigleyFm_2":1704327.0946672007,"NorringtonMannorFm_1":1721797.1990893567,"NorringtonMannorFm_2":1731744.9234184758,"ManorFmBerwickStJohn_1":1791909.568399136,"ManorFmBerwickStJohn_3":1774244.1394282852,"Jemma_1":1651728.9979246841,"Jemma_2":1719411.8052194831,"Jemma_7":1721502.116944364,"Jemma_4":1698622.8194125644,"Jemma_5":1721908.1189264411,"Jemma_6":1692064.8042974356,"Jemma_9":1716781.9440400747,"HomeFarm_WoodlandTrust_Hampshire_good_1c":1691536.2780162371,"Crux_easton_70b1":1785887.5927909389,"Crux_easton_70b2":1721956.1048223481,"Martin_Down_arabel_reversion":1730861.9716446039,"Parsonage_down_reversion":1705917.6982311951,"TARGET_MartinDown":1717373.7062527267,"TARGET_St_Catherines":1692883.4100311182,"TARGET_ParsonageDown":1718415.1612993921,"TARGET_KNEPP_A_New_Barn_Field":1658566.8639796951,"Knepp_Pond_field":1711155.2271609015,"Knepp_Benton_field":1589082.4023675343}}
</script>

<script type="text/javascript">
  var totalFrequencies = 113193267;
  var sampleCount = 66;
  var defaultDescription = "Retained " + (totalFrequencies.toLocaleString('en'))
                                       + " (100.00%) features in "
                                       + sampleCount + " (100.00%) samples at the specifed sampling depth.";


  var textField = document.getElementById('text-field');
  var tableBody = document.getElementById("table-body");
  var table = document.getElementById("feature-table");

  // when the viz loads the default description is displayed
  textField.innerHTML = defaultDescription;

  let sampleTable = JSON.parse(document.getElementById("table-data").innerHTML);
  let sampleFrequencies = sampleTable["Frequency"];
  // get object keys and store them in an ascending order based on the key value
  // this order is used to create the table rows
  sortedSampleIDs = Object.keys(sampleFrequencies).sort(function(a, b) {
    return sortIDs(a, b, sampleFrequencies)
  });

  formatTable(tableBody, sampleTable, sortedSampleIDs);

  function updateTableandText(samplingDepth) {
    let retainedSampleCount = 0;

    // start the counter at 1 to ignore the header row
    for (var i = 1; row = table.rows[i]; i++) {
      // The value in table is formatted as a string for display to the user,
      // but the value in sampleFrequencies is formatted as an int for data
      // manipulation, so we use the ID we are on in table to get the frequency
      // from sampleFrequencies.
      const sampleID = row.cells[0].innerText;
      const sampleFrequency = sampleFrequencies[sampleID];

      if (sampleFrequency < samplingDepth) {
        row.className = "danger";
      } else {
        row.className = "";
        retainedSampleCount += 1;
      }
    }
    if (samplingDepth == 0){
      textField.innerHTML = defaultDescription;
    }
    else{
      var retainedFeatureCount = retainedSampleCount * samplingDepth;
      textField.innerHTML = "Retained " + formatter.format(retainedFeatureCount)
                                        + " (" + (retainedFeatureCount/totalFrequencies*100).toFixed(2) + "%) features in "
                                        + retainedSampleCount + " (" + (retainedSampleCount/sampleCount*100).toFixed(2)
                                        +  "%) samples at the specifed sampling depth.";
    }
  }


  function updateSliderVal(val) {
    var slider = document.getElementById("range-slider");
    slider.value = val;
    slider.dispatchEvent(new Event("change"));
    slider.dispatchEvent(new Event("input"));
  }


  function updateBoxVal(val) {
    var num = document.getElementById("text-box");
    num.value = val;
  }


  function sliderHelperFunction(val){
    updateBoxVal(val);
    updateTableandText(val);
  }


  function textBoxHelperFunction(val){
    val = parseInt(val);
    if (val !== val) {
      val = 0;
    }

    // make sure the value in the textbox cannot exceed the max count
    if (val > 1828095.971276857){
      var num = document.getElementById("text-box");
      num.value = 1828095.971276857;
    }
    updateSliderVal(val);
  }
</script>


    </div>
  </div>


    </div>
    <script type="text/javascript">
      if (window.frameElement) {
          document.getElementById('q2templatesheader').remove();
      }
    </script>
    

  </body>
</html>