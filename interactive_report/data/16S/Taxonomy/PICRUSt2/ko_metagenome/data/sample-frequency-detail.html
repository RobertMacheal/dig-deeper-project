<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>q2_feature_table : summarize</title>
    <link rel="stylesheet" href="./q2templateassets/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="./q2templateassets/css/normalize.css"/>
    <link rel="stylesheet" href="./q2templateassets/css/base-template.css"/>
    <script src="./q2templateassets/js/jquery-3.2.0.min.js" charset="utf-8"></script>
    <script src="./q2templateassets/js/bootstrap.min.js" charset="utf-8"></script>
    
<script src="js/vega.min.js"></script>
<script src="js/vega-embed.min.js"></script>
<script src="util.js"></script>
<link rel="stylesheet" type="text/css" href="css/spinkit.css" /> 
  </head>
  <body>
    <div class="container-fluid">
      <div id="q2templatesheader" class="row">
        <div class="col-lg-12">
          <a href="http://qiime2.org/">
            <img src="./q2templateassets/img/qiime2-rect-200.png"
            alt="QIIME 2">
          </a>
        </div>
      </div>
        

  <div class="row">
    <div class="col-lg-12">
      <ul class="nav nav-tabs">
        
          <li class="">
            <a href="index.html">
              Overview
            </a>
          </li>
        
          <li class="active">
            <a href="sample-frequency-detail.html">
              Interactive Sample Detail
            </a>
          </li>
        
          <li class="">
            <a href="feature-frequency-detail.html">
              Feature Detail
            </a>
          </li>
        
      </ul>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-12">
      


<div class="row">

  <div class="col-lg-8">
    <div id="plot">
      <div id="loading" class="spinner">
        <div class="rect1"></div>
        <div class="rect2"></div>
        <div class="rect3"></div>
        <div class="rect4"></div>
        <div class="rect5"></div>
      </div>
    </div>
  </div>

  <div class="col-lg-4">
    <div class="row">
      <div class="col-lg-12">
        <h3>Plot Controls</h3>
      </div>
    </div>

    <div class="row">
      <div class="col-lg-12" id="toolbar"></div>
    </div>

    <div class="row">
      <div class="col-lg-12" id="metadata-category"></div>
    </div>

    <div class="row">
      <div class="col-lg-12" id="sampling-depth-slider"></div>
    </div>

    <div class="row">
      <div class="col-lg-12" id="text-field"></div>
    </div>
  </div>

</div>






<script type="text/javascript">
  function handleErrors(errors, element, msg) {
    console.error(errors);
    msg = msg === undefined ? '' : msg + '<br><br>';
    var helpMsg = '<p class="alert alert-danger"> \
                   There was an error loading and rendering the \
                   visualization.<br><br>' + msg + 'Please \
                   copy-and-paste the following error messages when \
                   reporting this error (please be aware that the content \
                   of your analysis data and/or metadata is included in \
                   these messages):</p>';
    var helpMsgDiv = $('<div></div>');
    helpMsgDiv.append(helpMsg);
    helpMsgDiv.append('<pre><code>' + errors.join('\n\n') + '</code></pre>');
    element.replaceWith(helpMsgDiv);
  }
  window.onerror = function(error) {
    handleErrors([error], $('#loading'));
  };
</script>
<script id="spec" type="application/json">
{"$schema": "https://vega.github.io/schema/vega/v5.json", "autosize": {"contains": "content", "type": "fit-x", "resize": true}, "width": 800, "data": [{"transform": [{"as": "selectedCategory", "expr": "datum.metadata[category]", "type": "formula"}], "name": "table", "values": [{"id": "Whitelands_2018_19_", "metadata": {"Year_est": "2018", "Age": "3", "OS_location": "SU2990087100", "Lat_long": "51.581972;_-1.5698756", "Establishment": "seed_mix", "pH": 8.03, "EC": 136.4, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 13433764.080000198}, {"id": "Castle_Field_West__W_", "metadata": {"Year_est": "2002", "Age": "19", "OS_location": "SU2950086200", "Lat_long": "51.573901;_-1.5757235", "Establishment": "seed_mix", "pH": 7.93, "EC": 139.3, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 14090863.679999985}, {"id": "Toposcope_Field_-_1980s", "metadata": {"Year_est": "1985", "Age": "36", "OS_location": "SU2950086600", "Lat_long": "51.577497;_-1.5756901", "Establishment": "Natural_regen", "pH": 7.94, "EC": 139.7, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "1981-2000", "Age_group": "31-40", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 14122247.099999633}, {"id": "Bradenham_post-1986_b", "metadata": {"Year_est": "1986", "Age": "35", "OS_location": "SU8290097718", "Lat_long": "51.672127;_-0.80258692", "Establishment": "seed_mix", "pH": 7.84, "EC": 151.7, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "1981-2000", "Age_group": "31-40", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 13164752.149999622}, {"id": "Lardon_Chase_The_Holies_motorcycle", "metadata": {"Year_est": "2007", "Age": "14", "OS_location": "SU5930079800", "Lat_long": "51.514021;_-1.1468383", "Establishment": "Natural_regen", "pH": 7.94, "EC": 135.7, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 14520790.219999824}, {"id": "Stonehenge_2000_2017a", "metadata": {"Year_est": "2000", "Age": "21", "OS_location": "SU1370042400", "Lat_long": "51.180671;_-1.8053828", "Establishment": "Green_hay_bush", "pH": 7.88, "EC": 144.3, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 13718533.170000043}, {"id": "Stonehenge_2003_2017b", "metadata": {"Year_est": "2003", "Age": "18", "OS_location": "SU1150041600", "Lat_long": "51.173525;_-1.8368821", "Establishment": "Green_hay_bush", "pH": 7.69, "EC": 184.4, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 13536733.489999752}, {"id": "Stonehenge_2009", "metadata": {"Year_est": "2009", "Age": "12", "OS_location": "SU1050041700", "Lat_long": "51.174443;_-1.8511833", "Establishment": "Green_hay_bush", "pH": 7.82, "EC": 156.5, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 13675072.360000214}, {"id": "Stonehenge_2007_2016", "metadata": {"Year_est": "2007", "Age": "14", "OS_location": "SU1100041900", "Lat_long": "51.176233;_-1.8440251", "Establishment": "Green_hay_bush", "pH": 7.87, "EC": 158.8, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 13447364.830000179}, {"id": "Stonehenge_2005", "metadata": {"Year_est": "2005", "Age": "16", "OS_location": "SU1140042200", "Lat_long": "51.178922;_-1.8382937", "Establishment": "Green_hay_bush", "pH": 7.85, "EC": 145.0, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 13459931.899999853}, {"id": "Stonehenge_2002_2017", "metadata": {"Year_est": "2002", "Age": "19", "OS_location": "SU1480043200", "Lat_long": "51.187837;_-1.7896132", "Establishment": "Green_hay_bush", "pH": 7.91, "EC": 130.3, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 13994735.52000028}, {"id": "Stonehenge_2010", "metadata": {"Year_est": "2010", "Age": "11", "OS_location": "SU1070043000", "Lat_long": "51.186129;_-1.8482842", "Establishment": "Green_hay_bush", "pH": 7.69, "EC": 202.0, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 13705162.139999785}, {"id": "Stonehenge_2011", "metadata": {"Year_est": "2011", "Age": "10", "OS_location": "SU1050043600", "Lat_long": "51.191528;_-1.8511284", "Establishment": "Green_hay_bush", "pH": 7.85, "EC": 174.3, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 13532130.719999887}, {"id": "Stonehenge_-_Luxenborough_BankB", "metadata": {"Year_est": "2000", "Age": "21", "OS_location": "SU1290041900", "Lat_long": "51.176193;_-1.8168457", "Establishment": "Green_hay_bush", "pH": 7.78, "EC": 186.6, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 13446921.93999984}, {"id": "Watlington_natural_reversion", "metadata": {"Year_est": "2000", "Age": "21", "OS_location": "SU7050293600", "Lat_long": "51.636798;_-0.98266944", "Establishment": "Natural_regen", "pH": 7.8, "EC": 147.5, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 13404115.750000069}, {"id": "St_Catherines_A3", "metadata": {"Year_est": "1994", "Age": "27", "OS_location": "SU4812327449", "Lat_long": "51.044386;_-1.3149275", "Establishment": "Green_hay_bush", "pH": 7.63, "EC": 222.0, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 13871883.290000085}, {"id": "HARLEY_FARMS_Chittern", "metadata": {"Year_est": "2013", "Age": "8", "OS_location": "ST9762044730", "Lat_long": "51.201778;_-2.0354461", "Establishment": "seed_mix", "pH": 7.77, "EC": 197.9, "Cutting": "yes", "Cattle": "yes", "Sheep": "no", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 13882590.95999979}, {"id": "HARLEY_FARMS_New1", "metadata": {"Year_est": "2020", "Age": "1", "OS_location": "ST9346829822", "Lat_long": "51.067692;_-2.0945983", "Establishment": "seed_mix", "pH": 7.84, "EC": 144.1, "Cutting": "no", "Cattle": "yes", "Sheep": "no", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 13816391.379999787}, {"id": "HARLEY_FARMS_new2b", "metadata": {"Year_est": "2020", "Age": "1", "OS_location": "ST9242629613", "Lat_long": "51.065799;_-2.1094648", "Establishment": "seed_mix", "pH": 7.09, "EC": 102.5, "Cutting": "yes", "Cattle": "no", "Sheep": "no", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 13844842.959999941}, {"id": "WINDMILL_farm", "metadata": {"Year_est": "1990", "Age": "31", "OS_location": "SU7176229761", "Lat_long": "51.06271;_-0.97732036", "Establishment": "seed_mix", "pH": 7.32, "EC": 210.0, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "1981-2000", "Age_group": "31-40", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 13994246.24000018}, {"id": "DRUIDS", "metadata": {"Year_est": "2002", "Age": "19", "OS_location": "SU2964250324", "Lat_long": "51.251319;_-1.5766624", "Establishment": "seed_mix", "pH": 7.14, "EC": 176.3, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 14215196.099999651}, {"id": "Stratton_Wood", "metadata": {"Year_est": "1995", "Age": "26", "OS_location": "SU1647289260", "Lat_long": "51.601942;_-1.7635665", "Establishment": "seed_mix", "pH": 7.41, "EC": 126.8, "Cutting": "yes", "Cattle": "no", "Sheep": "no", "Plough": "yes", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 13671792.849999677}, {"id": "WESTMEAD_FARM", "metadata": {"Year_est": "2000", "Age": "21", "OS_location": "SU6317525168", "Lat_long": "51.022422;_-1.1006408", "Establishment": "seed_mix", "pH": 7.75, "EC": 159.0, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 13759226.980000144}, {"id": "RSPB_orig_green", "metadata": {"Year_est": "2006", "Age": "15", "OS_location": "SU2135640329", "Lat_long": "51.161815;_-1.6959767", "Establishment": "Green_hay_bush", "pH": 7.99, "EC": 138.1, "Cutting": "no", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 14360954.070000365}, {"id": "RSPB_churchil", "metadata": {"Year_est": "2010", "Age": "11", "OS_location": "SU2075340336", "Lat_long": "51.1619;_-1.7045994", "Establishment": "Green_hay_bush", "pH": 8.01, "EC": 116.8, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 14016944.599999703}, {"id": "RSPB_junction", "metadata": {"Year_est": "2007", "Age": "14", "OS_location": "SU2267739280", "Lat_long": "51.152332;_-1.6771517", "Establishment": "Green_hay_bush", "pH": 8.41, "EC": 24.6, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 13987390.289999986}, {"id": "RSPB_Mainline", "metadata": {"Year_est": "2016", "Age": "5", "OS_location": "SU2250539212", "Lat_long": "51.151728;_-1.6796151", "Establishment": "Green_hay_bush", "pH": 8.48, "EC": 23.4, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 13840588.299999963}, {"id": "Baltic_farm_1", "metadata": {"Year_est": "2005", "Age": "16", "OS_location": "SU0459767825", "Lat_long": "51.40943;_-1.9352946", "Establishment": "Green_hay_bush", "pH": 7.94, "EC": 29.2, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 14268030.870000336}, {"id": "Baltic_farm_2", "metadata": {"Year_est": "1998", "Age": "23", "OS_location": "SU0306867167", "Lat_long": "51.403524;_-1.9572835", "Establishment": "Green_hay_bush", "pH": 8.27, "EC": 29.6, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 14063410.219999839}, {"id": "WestEndFarm", "metadata": {"Year_est": "2019", "Age": "2", "OS_location": "SU0297366901", "Lat_long": "51.401133;_-1.9586514", "Establishment": "Green_hay_bush", "pH": 8.44, "EC": 24.1, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 14716839.769999739}, {"id": "HorntonHouseFarm_1_parallel", "metadata": {"Year_est": "2016", "Age": "5", "OS_location": "SU0584565118", "Lat_long": "51.385079;_-1.917395", "Establishment": "seed_mix", "pH": 8.6, "EC": 29.5, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 13901108.149999682}, {"id": "TownsendFarm_1", "metadata": {"Year_est": "2017", "Age": "4", "OS_location": "SU0775065316", "Lat_long": "51.386837;_-1.8900159", "Establishment": "seed_mix", "pH": 8.2, "EC": 36.6, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 13797640.130000053}, {"id": "TownsendFarm_2", "metadata": {"Year_est": "2010", "Age": "11", "OS_location": "SU0705164722", "Lat_long": "51.381505;_-1.9000725", "Establishment": "seed_mix", "pH": 8.45, "EC": 21.2, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 13914537.090000262}, {"id": "TownsendFarm_3_big", "metadata": {"Year_est": "2014", "Age": "7", "OS_location": "SU0886965184", "Lat_long": "51.385634;_-1.8739384", "Establishment": "Green_hay_bush", "pH": 7.92, "EC": 42.7, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 13879104.199999865}, {"id": "ChurchFarm", "metadata": {"Year_est": "2012", "Age": "9", "OS_location": "SU0979864321", "Lat_long": "51.377859;_-1.8606121", "Establishment": "seed_mix", "pH": 8.63, "EC": 20.7, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 14257602.039999876}, {"id": "StowellFarms_1_adj", "metadata": {"Year_est": "2015", "Age": "6", "OS_location": "SU1362464180", "Lat_long": "51.376513;_-1.8056466", "Establishment": "seed_mix", "pH": 6.6, "EC": 21.8, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 16052930.309999788}, {"id": "MannorFmAltonBarnes", "metadata": {"Year_est": "2012", "Age": "9", "OS_location": "SU1211561331", "Lat_long": "51.35093;_-1.827423", "Establishment": "seed_mix", "pH": 8.07, "EC": 21.6, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 13492739.370000362}, {"id": "HommingtonFarm", "metadata": {"Year_est": "2014", "Age": "7", "OS_location": "SU1332825982", "Lat_long": "51.033048;_-1.811306", "Establishment": "seed_mix", "pH": 8.22, "EC": 26.3, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 14198727.590000099}, {"id": "ThropeManor_1", "metadata": {"Year_est": "2002", "Age": "19", "OS_location": "SU0886123850", "Lat_long": "51.013962;_-1.8750607", "Establishment": "seed_mix", "pH": 7.54, "EC": 78.1, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 15518869.880000342}, {"id": "ThropeManor_2", "metadata": {"Year_est": "1998", "Age": "23", "OS_location": "SU0843924348", "Lat_long": "51.018447;_-1.8810649", "Establishment": "seed_mix", "pH": 7.73, "EC": 28.8, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 14734190.579999743}, {"id": "ThropeManor_3", "metadata": {"Year_est": "2000", "Age": "21", "OS_location": "SU0901525189", "Lat_long": "51.026001;_-1.8728325", "Establishment": "seed_mix", "pH": 8.13, "EC": 28.5, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 14274843.169999773}, {"id": "MannorFmBroadChalke", "metadata": {"Year_est": "2010", "Age": "11", "OS_location": "SU0468023121", "Lat_long": "51.007455;_-1.9346701", "Establishment": "Green_hay_bush", "pH": 8.24, "EC": 24.3, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 14033490.230000192}, {"id": "BigleyFm_1", "metadata": {"Year_est": "2014", "Age": "7", "OS_location": "ST9798720966", "Lat_long": "50.988091;_-2.0300532", "Establishment": "seed_mix", "pH": 8.1, "EC": 31.3, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 14894576.369999595}, {"id": "BigleyFm_2", "metadata": {"Year_est": "2017", "Age": "4", "OS_location": "ST9796821801", "Lat_long": "50.9956;_-2.0303288", "Establishment": "seed_mix", "pH": 7.35, "EC": 46.8, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 14460468.62999982}, {"id": "NorringtonMannorFm_1", "metadata": {"Year_est": "2009", "Age": "12", "OS_location": "ST9689721419", "Lat_long": "50.99216;_-2.0455866", "Establishment": "seed_mix", "pH": 7.83, "EC": 33.5, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 14030295.599999923}, {"id": "NorringtonMannorFm_2", "metadata": {"Year_est": "2009", "Age": "12", "OS_location": "ST9699420390", "Lat_long": "50.982907;_-2.0441957", "Establishment": "seed_mix", "pH": 8.2, "EC": 28.5, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 14081822.250000156}, {"id": "ManorFmBerwickStJohn_1", "metadata": {"Year_est": "2014", "Age": "7", "OS_location": "ST9468023123", "Lat_long": "51.007466;_-2.0772007", "Establishment": "seed_mix", "pH": 7.47, "EC": 17.83, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 15037929.74000016}, {"id": "ManorFmBerwickStJohn_3", "metadata": {"Year_est": "2018", "Age": "3", "OS_location": "ST9422022841", "Lat_long": "51.004926;_-2.0837525", "Establishment": "seed_mix", "pH": 8.36, "EC": 23.0, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 14733781.190000193}, {"id": "Jemma_1", "metadata": {"Year_est": "2010", "Age": "11", "OS_location": "SU1405276456", "Lat_long": "51.486882;_-1.7990143", "Establishment": "Green_hay_bush", "pH": 8.31, "EC": 33.5, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 13379560.569999699}, {"id": "Jemma_2", "metadata": {"Year_est": "2008", "Age": "13", "OS_location": "SU1194873670", "Lat_long": "51.46188;_-1.8294093", "Establishment": "Natural_regen", "pH": 7.96, "EC": 104.2, "Cutting": "no", "Cattle": "yes", "Sheep": "no", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 13933386.869999677}, {"id": "Jemma_7", "metadata": {"Year_est": "2014", "Age": "7", "OS_location": "SU1641473039", "Lat_long": "51.456096;_-1.7651546", "Establishment": "Green_hay_bush", "pH": 7.95, "EC": 106.1, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 14012239.099999906}, {"id": "Jemma_4", "metadata": {"Year_est": "2015", "Age": "6", "OS_location": "SU1261971802", "Lat_long": "51.44507;_-1.8198169", "Establishment": "Green_hay_bush", "pH": 7.31, "EC": 145.8, "Cutting": "yes", "Cattle": "yes", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "BelowMedian"}, "frequency": 13778336.000000099}, {"id": "Jemma_5", "metadata": {"Year_est": "2015", "Age": "6", "OS_location": "SU1538172691", "Lat_long": "51.452995;_-1.7800368", "Establishment": "seed_mix", "pH": 8.2, "EC": 77.7, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 13899811.99999953}, {"id": "Jemma_6", "metadata": {"Year_est": "2013", "Age": "8", "OS_location": "SU1560872573", "Lat_long": "51.451928;_-1.7767752", "Establishment": "seed_mix", "pH": 8.54, "EC": 66.9, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 13480773.99000009}, {"id": "Jemma_9", "metadata": {"Year_est": "2015", "Age": "6", "OS_location": "SU1669072674", "Lat_long": "51.452806;_-1.7611995", "Establishment": "seed_mix", "pH": 8.22, "EC": 104.9, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2011-2020", "Age_group": "0-10", "Age_binary": "BelowMedian", "pH_binary": "AboveMedian"}, "frequency": 14054466.600000123}, {"id": "HomeFarm_WoodlandTrust_Hampshire_good_1c", "metadata": {"Year_est": "1994", "Age": "27", "OS_location": "SU6579941829", "Lat_long": "51.171925;_-1.0602025", "Establishment": "seed_mix", "pH": 6.62, "EC": 28.4, "Cutting": "no", "Cattle": "yes", "Sheep": "no", "Plough": "no", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 14066062.67000001}, {"id": "Crux_easton_70b1", "metadata": {"Year_est": "2000", "Age": "21", "OS_location": "SU4192556251", "Lat_long": "51.303843;_-1.3999827", "Establishment": "seed_mix", "pH": 7.78, "EC": 80.7, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "1981-2000", "Age_group": "21-30", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 14557426.590000438}, {"id": "Crux_easton_70b2", "metadata": {"Year_est": "2002", "Age": "19", "OS_location": "SU4195056550", "Lat_long": "51.306529;_-1.399589", "Establishment": "seed_mix", "pH": 8.4, "EC": 76.3, "Cutting": "yes", "Cattle": "no", "Sheep": "yes", "Plough": "no", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 13957124.829999795}, {"id": "Martin_Down_arabel_reversion", "metadata": {"Year_est": "1957", "Age": "64", "OS_location": "SU0390520162", "Lat_long": "50.980853;_-1.9457471", "Establishment": "Natural_regen", "pH": 8.23, "EC": 115.8, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "yes", "Year_group": "1940-60", "Age_group": "61-70", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 13993554.250000266}, {"id": "Parsonage_down_reversion", "metadata": {"Year_est": "1945", "Age": "76", "OS_location": "SU0610341686", "Lat_long": "51.174381;_-1.9140803", "Establishment": "Natural_regen", "pH": 8.12, "EC": 89.8, "Cutting": "no", "Cattle": "yes", "Sheep": "no", "Plough": "yes", "Year_group": "1940-60", "Age_group": "71-100", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 13898446.090000357}, {"id": "TARGET_MartinDown", "metadata": {"Year_est": "old", "Age": ">100", "OS_location": "SU0558918665", "Lat_long": "50.967378;_-1.9217813", "Establishment": "Natural_regen", "pH": 8.05, "EC": 104.9, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "unknown", "Year_group": null, "Age_group": "100+", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 14183895.7499996}, {"id": "TARGET_St_Catherines", "metadata": {"Year_est": "old", "Age": ">100", "OS_location": "SU4832527522", "Lat_long": "51.045025;_-1.3120365", "Establishment": "Natural_regen", "pH": 7.95, "EC": 184.8, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "unknown", "Year_group": null, "Age_group": "100+", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 14432526.840000585}, {"id": "TARGET_ParsonageDown", "metadata": {"Year_est": "old", "Age": ">100", "OS_location": "SU0552141345", "Lat_long": "51.17132;_-1.9224106", "Establishment": "Natural_regen", "pH": 8.06, "EC": 112.3, "Cutting": "no", "Cattle": "no", "Sheep": "yes", "Plough": "unknown", "Year_group": null, "Age_group": "100+", "Age_binary": "AboveMedian", "pH_binary": "AboveMedian"}, "frequency": 14149211.290000191}, {"id": "TARGET_KNEPP_A_New_Barn_Field", "metadata": {"Year_est": "2006", "Age": "15", "OS_location": "TQ1420019600", "Lat_long": "50.964513;_-0.3751305", "Establishment": "Natural_regen", "pH": 6.72, "EC": 48.7, "Cutting": "no", "Cattle": "yes", "Sheep": "no", "Plough": "unknown", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 13628166.47000027}, {"id": "Knepp_Pond_field", "metadata": {"Year_est": "2003", "Age": "18", "OS_location": "TQ1410019300", "Lat_long": "50.961836;_-0.3766479", "Establishment": "Natural_regen", "pH": 6.62, "EC": 23.5, "Cutting": "no", "Cattle": "yes", "Sheep": "no", "Plough": "unknown", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 14801392.720000051}, {"id": "Knepp_Benton_field", "metadata": {"Year_est": "2005", "Age": "16", "OS_location": "TQ1450019800", "Lat_long": "50.966251;_-0.37079737", "Establishment": "Natural_regen", "pH": 6.52, "EC": 27.6, "Cutting": "no", "Cattle": "yes", "Sheep": "no", "Plough": "unknown", "Year_group": "2001-2010", "Age_group": "11-20", "Age_binary": "AboveMedian", "pH_binary": "BelowMedian"}, "frequency": 12932011.379999742}]}, {"transform": [{"type": "aggregate", "groupby": ["selectedCategory"]}], "name": "groupedBySelectedCategory", "source": "table"}, {"transform": [{"expr": "datum.frequency >= samplingDepth", "type": "filter"}, {"type": "aggregate", "groupby": ["selectedCategory"]}], "name": "groupedBySelectedCategoryAndRetained", "source": "table"}], "signals": [{"name": "width", "value": "", "bind": {"input": "text"}, "on": [{"events": {"source": "window", "type": "resize"}, "update": "containerSize()[0]"}]}, {"name": "chartHeight", "update": "width / 2.5"}, {"name": "chartOffset", "value": 20}, {"name": "height", "update": "chartHeight + chartOffset"}, {"name": "tooltip", "value": {}, "on": [{"events": "rect:mouseover", "update": "datum"}, {"events": "rect:mouseout", "update": "{}"}]}, {"bind": {"input": "select", "options": ["Year_est", "Age", "OS_location", "Lat_long", "Establishment", "pH", "EC", "Cutting", "Cattle", "Sheep", "Plough", "Year_group", "Age_group", "Age_binary", "pH_binary"], "element": "#metadata-category"}, "name": "category", "value": "Year_est"}, {"bind": {"input": "range", "element": "#sampling-depth-slider", "max": 16052930, "min": 0, "step": 1}, "name": "samplingDepth", "value": 0}], "marks": [{"description": "Interactive rarefaction summary plot", "name": "rarefactionplot", "type": "group", "encode": {"enter": {"x": {"value": 0}, "y": {"signal": "chartOffset"}, "width": {"value": 200}, "height": {"signal": "chartHeight"}}}, "marks": [{"type": "rect", "from": {"data": "groupedBySelectedCategory"}, "encode": {"enter": {"x": {"scale": "xscale", "field": "selectedCategory"}, "width": {"scale": "xscale", "band": 1}, "y": {"scale": "yscale", "field": "count"}, "y2": {"scale": "yscale", "value": 0}}, "update": {"tooltip": {"signal": "{'title': datum.selectedCategory, 'Total Samples': datum.count}"}, "fill": {"value": "#D3D3D3"}, "x": {"scale": "xscale", "field": "selectedCategory"}, "width": {"scale": "xscale", "band": 1}, "y": {"scale": "yscale", "field": "count"}, "y2": {"scale": "yscale", "value": 0}}}}, {"type": "rect", "from": {"data": "groupedBySelectedCategoryAndRetained"}, "encode": {"enter": {"x": {"scale": "xscale", "field": "selectedCategory"}, "width": {"scale": "xscale", "band": 1}, "y": {"scale": "yscale", "field": "count"}, "y2": {"scale": "yscale", "value": 0}}, "update": {"tooltip": {"signal": "{'title': datum.selectedCategory, 'Samples Retained': datum.count}"}, "x": {"scale": "xscale", "field": "selectedCategory"}, "width": {"scale": "xscale", "band": 1}, "y": {"scale": "yscale", "field": "count"}, "y2": {"scale": "yscale", "value": 0}, "fill": {"value": "#1F77B4"}}, "hover": {"fill": {"value": "#60B3F7"}}}}, {"type": "text", "encode": {"enter": {"align": {"value": "center"}, "baseline": {"value": "top"}, "fill": {"value": "#000000"}}, "update": {"x": {"scale": "xscale", "signal": "tooltip.selectedCategory", "band": 0.5}, "y": {"scale": "yscale", "signal": "tooltip.count", "offset": -12}, "text": {"signal": "tooltip.count"}, "fillOpacity": [{"test": "datum === tooltip", "value": 0}, {"value": 1}]}}}], "scales": [{"name": "xscale", "type": "band", "domain": {"data": "groupedBySelectedCategory", "field": "selectedCategory", "sort": true}, "range": "width", "padding": 0.1, "round": true}, {"name": "yscale", "domain": {"fields": [{"data": "groupedBySelectedCategory", "field": "count"}]}, "nice": true, "range": [{"signal": "chartHeight"}, 0]}], "axes": [{"orient": "bottom", "scale": "xscale", "title": {"signal": "category"}, "labelAngle": 90, "labelAlign": "left", "labelBaseline": "middle"}, {"orient": "left", "scale": "yscale", "title": "Number of Samples", "tickMinStep": 1}]}]}
</script>

<script type="text/javascript">
  $(document).ready(function() {
    var spec = JSON.parse(document.getElementById("spec").innerHTML);

    // Try and come up with a good initial estimate of plot dimensions,
    // based on the browser dimensions.
    var opts = {
      width: $("#plot").width(),
      height: $("#plot").width() / 2.5
    };

    vegaEmbed("#plot", spec, opts)
      .then(function(result) {
        result.view.logLevel(vega.Warn);
        // Stash the view object in global namespace for debugging purposes.
        // Check out https://vega.github.io/vega/docs/api/debugging/
        // for more details.
        window.v = result.view;
      })
      .catch(function(error) {
        // From 'js-error-handler.html'
        handleErrors([error], $("#plot"));
      });

    // Clean up the vega-embed toolbar
    var toolbar = $("div .vega-actions").detach();
    toolbar.addClass("btn-group");
    toolbar.children("a").each(function() {
      // NOTE: We're just skipping this bit until we get the plot working with
      // Vega 5
      if(this.innerHTML == "Open in Vega Editor"){
        this.remove()
        return true
      }
      $(this).addClass("btn btn-default");
    });

    toolbar.appendTo("#toolbar");

    var category = $("#metadata-category .vega-bind");
    category
      .children(".vega-bind-name")
      .replaceWith("<label> Metadata Category &nbsp;</label>");
    category.children("select").addClass("form-control");

    var samplingDepthSlider = $("#sampling-depth-slider .vega-bind");
    $(samplingDepthSlider)
      .find("label")
      .remove();
    $(samplingDepthSlider)
      .find("input")
      .attr("id", "range-slider");
    $(samplingDepthSlider)
      .find("input")
      .attr("oninput", "sliderHelperFunction(this.value);");
    $(samplingDepthSlider).prepend(
      "<label> Sampling Depth &nbsp; </label> <br>"
    );
    $(samplingDepthSlider).append(
      '<br> <input id="text-box" class="form-control" type="number" value="0" min="0" oninput="textBoxHelperFunction(this.value);" />'
    );
    $(samplingDepthSlider).append("(zero implies no even sampling)");
    samplingDepthSlider.children(".vega-bind-name").replaceWith("");

    var rotateLabels = $("#rotate-labels .vega-bind");
    rotateLabels
      .children(".vega-bind-name")
      .replaceWith("<label> Rotate Labels &nbsp;</label>");
    rotateLabels.children("checkbox").addClass("form-control");
  });
</script>


<div class="row">
  <div class="col-lg-8">
    <table id="feature-table" class="table table-striped">
      <thead>
        <tr>
          <th scope="col">Sample ID</th>
          <th scope="col">Frequency</th>
        </tr>
      </thead>
      <tbody id="table-body"></tbody>
    </table>
  </div>
</div>

<script id="table-data" type="application/json">
{"Frequency":{"Whitelands_2018_19_":13433764.0800001975,"Castle_Field_West__W_":14090863.6799999848,"Toposcope_Field_-_1980s":14122247.0999996327,"Bradenham_post-1986_b":13164752.1499996223,"Lardon_Chase_The_Holies_motorcycle":14520790.2199998237,"Stonehenge_2000_2017a":13718533.1700000428,"Stonehenge_2003_2017b":13536733.4899997525,"Stonehenge_2009":13675072.3600002136,"Stonehenge_2007_2016":13447364.8300001789,"Stonehenge_2005":13459931.8999998532,"Stonehenge_2002_2017":13994735.5200002808,"Stonehenge_2010":13705162.1399997845,"Stonehenge_2011":13532130.719999887,"Stonehenge_-_Luxenborough_BankB":13446921.9399998393,"Watlington_natural_reversion":13404115.7500000689,"St_Catherines_A3":13871883.2900000848,"HARLEY_FARMS_Chittern":13882590.9599997904,"HARLEY_FARMS_New1":13816391.3799997866,"HARLEY_FARMS_new2b":13844842.9599999413,"WINDMILL_farm":13994246.2400001809,"DRUIDS":14215196.0999996513,"Stratton_Wood":13671792.8499996774,"WESTMEAD_FARM":13759226.9800001439,"RSPB_orig_green":14360954.0700003654,"RSPB_churchil":14016944.5999997035,"RSPB_junction":13987390.2899999861,"RSPB_Mainline":13840588.2999999635,"Baltic_farm_1":14268030.8700003363,"Baltic_farm_2":14063410.2199998386,"WestEndFarm":14716839.7699997388,"HorntonHouseFarm_1_parallel":13901108.1499996819,"TownsendFarm_1":13797640.130000053,"TownsendFarm_2":13914537.0900002625,"TownsendFarm_3_big":13879104.1999998651,"ChurchFarm":14257602.0399998762,"StowellFarms_1_adj":16052930.3099997882,"MannorFmAltonBarnes":13492739.3700003624,"HommingtonFarm":14198727.5900000986,"ThropeManor_1":15518869.8800003417,"ThropeManor_2":14734190.579999743,"ThropeManor_3":14274843.1699997727,"MannorFmBroadChalke":14033490.2300001923,"BigleyFm_1":14894576.369999595,"BigleyFm_2":14460468.6299998201,"NorringtonMannorFm_1":14030295.5999999233,"NorringtonMannorFm_2":14081822.2500001565,"ManorFmBerwickStJohn_1":15037929.7400001604,"ManorFmBerwickStJohn_3":14733781.1900001932,"Jemma_1":13379560.5699996985,"Jemma_2":13933386.8699996769,"Jemma_7":14012239.0999999065,"Jemma_4":13778336.0000000987,"Jemma_5":13899811.9999995306,"Jemma_6":13480773.9900000896,"Jemma_9":14054466.6000001226,"HomeFarm_WoodlandTrust_Hampshire_good_1c":14066062.6700000092,"Crux_easton_70b1":14557426.5900004376,"Crux_easton_70b2":13957124.8299997952,"Martin_Down_arabel_reversion":13993554.2500002664,"Parsonage_down_reversion":13898446.0900003575,"TARGET_MartinDown":14183895.7499995995,"TARGET_St_Catherines":14432526.8400005847,"TARGET_ParsonageDown":14149211.290000191,"TARGET_KNEPP_A_New_Barn_Field":13628166.4700002708,"Knepp_Pond_field":14801392.720000051,"Knepp_Benton_field":12932011.3799997419}}
</script>

<script type="text/javascript">
  var totalFrequencies = 925996498;
  var sampleCount = 66;
  var defaultDescription = "Retained " + (totalFrequencies.toLocaleString('en'))
                                       + " (100.00%) features in "
                                       + sampleCount + " (100.00%) samples at the specifed sampling depth.";


  var textField = document.getElementById('text-field');
  var tableBody = document.getElementById("table-body");
  var table = document.getElementById("feature-table");

  // when the viz loads the default description is displayed
  textField.innerHTML = defaultDescription;

  let sampleTable = JSON.parse(document.getElementById("table-data").innerHTML);
  let sampleFrequencies = sampleTable["Frequency"];
  // get object keys and store them in an ascending order based on the key value
  // this order is used to create the table rows
  sortedSampleIDs = Object.keys(sampleFrequencies).sort(function(a, b) {
    return sortIDs(a, b, sampleFrequencies)
  });

  formatTable(tableBody, sampleTable, sortedSampleIDs);

  function updateTableandText(samplingDepth) {
    let retainedSampleCount = 0;

    // start the counter at 1 to ignore the header row
    for (var i = 1; row = table.rows[i]; i++) {
      // The value in table is formatted as a string for display to the user,
      // but the value in sampleFrequencies is formatted as an int for data
      // manipulation, so we use the ID we are on in table to get the frequency
      // from sampleFrequencies.
      const sampleID = row.cells[0].innerText;
      const sampleFrequency = sampleFrequencies[sampleID];

      if (sampleFrequency < samplingDepth) {
        row.className = "danger";
      } else {
        row.className = "";
        retainedSampleCount += 1;
      }
    }
    if (samplingDepth == 0){
      textField.innerHTML = defaultDescription;
    }
    else{
      var retainedFeatureCount = retainedSampleCount * samplingDepth;
      textField.innerHTML = "Retained " + formatter.format(retainedFeatureCount)
                                        + " (" + (retainedFeatureCount/totalFrequencies*100).toFixed(2) + "%) features in "
                                        + retainedSampleCount + " (" + (retainedSampleCount/sampleCount*100).toFixed(2)
                                        +  "%) samples at the specifed sampling depth.";
    }
  }


  function updateSliderVal(val) {
    var slider = document.getElementById("range-slider");
    slider.value = val;
    slider.dispatchEvent(new Event("change"));
    slider.dispatchEvent(new Event("input"));
  }


  function updateBoxVal(val) {
    var num = document.getElementById("text-box");
    num.value = val;
  }


  function sliderHelperFunction(val){
    updateBoxVal(val);
    updateTableandText(val);
  }


  function textBoxHelperFunction(val){
    val = parseInt(val);
    if (val !== val) {
      val = 0;
    }

    // make sure the value in the textbox cannot exceed the max count
    if (val > 16052930.309999788){
      var num = document.getElementById("text-box");
      num.value = 16052930.309999788;
    }
    updateSliderVal(val);
  }
</script>


    </div>
  </div>


    </div>
    <script type="text/javascript">
      if (window.frameElement) {
          document.getElementById('q2templatesheader').remove();
      }
    </script>
    

  </body>
</html>