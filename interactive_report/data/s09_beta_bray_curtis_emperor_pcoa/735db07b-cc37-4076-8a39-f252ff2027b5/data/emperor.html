<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Emperor</title>
    <!-- core dependencies that are otherwise included via the jupyter notebook -->
<script src="./vendor/js/require-2.1.22.min.js"></script>
<script src="./vendor/js/jquery-2.1.4.min.js"></script>
    <meta charset="utf-8">

    <script type="text/javascript">

if ($("#emperor-css").length == 0){{
    $("head").append([

        '<link id="emperor-css" rel="stylesheet" type="text/css" href="./css/emperor.css">',
        '<link rel="stylesheet" type="text/css" href="./vendor/css/jquery-ui.min.css">',
        '<link rel="stylesheet" type="text/css" href="./vendor/css/slick.grid.min.css">',
        '<link rel="stylesheet" type="text/css" href="./vendor/css/spectrum.min.css">',
        '<link rel="stylesheet" type="text/css" href="./vendor/css/chosen.min.css">',
        '<link rel="stylesheet" type="text/css" href="./vendor/css/jquery.contextMenu.min.css">'
    ]);
}}
</script>


    <style>
      #emperor-notebook-0xdde299a {
        height:100vh !important;
        padding: 0px !important;
      }
      body {
        margin: 0;
        padding: 0;
        border: 0;
        outline: 0;
      }
    </style>
  </head>
  <body>
    <div id='emperor-notebook-0xdde299a' style="position: relative; width:100%; height:500px;">
  <div class='loading' style="position: absolute;top: 50%;left: 50%;margin-left: -229px; margin-top: -59px; z-index: 10000;height:118px;width:458px;padding:0px"><img src='./img/emperor.png' alt='Emperor resources missing. Expected them to be found in .'></div>
</div>
</div>
    <script type="text/javascript">
    // When running in the Jupyter notebook we've encountered version conflicts
// with some dependencies. So instead of polluting the global require context,
// we define a new context.
var emperorRequire = require.config({
'context': 'emperor',
// the left side is the module name, and the right side is the path
// relative to the baseUrl attribute, do NOT include the .js extension
'paths': {
  /* jQuery */
  'jquery': './vendor/js/jquery-2.1.4.min',
  'jqueryui': './vendor/js/jquery-ui.min',
  'jquery_drag': './vendor/js/jquery.event.drag-2.2.min',

  /* jQuery plugins */
  'chosen': './vendor/js/chosen.jquery.min',
  'spectrum': './vendor/js/spectrum.min',
  'position': './vendor/js/jquery.ui.position.min',
  'contextmenu': './vendor/js/jquery.contextMenu.min',

  /* other libraries */
  'underscore': './vendor/js/underscore-min',
  'chroma': './vendor/js/chroma.min',
  'filesaver': './vendor/js/FileSaver.min',
  'blob': './vendor/js/Blob',
  'canvastoblob': './vendor/js/canvas-toBlob',
  'd3': './vendor/js/d3.min',

  /* THREE.js and plugins */
  'three': './vendor/js/three.min',
  'orbitcontrols': './vendor/js/three.js-plugins/OrbitControls',
  'projector': './vendor/js/three.js-plugins/Projector',
  'svgrenderer': './vendor/js/three.js-plugins/SVGRenderer',
  'canvasrenderer': './vendor/js/three.js-plugins/CanvasRenderer',
  'selectionbox': './vendor/js/three.js-plugins/SelectionBox',
  'selectionhelper': './vendor/js/three.js-plugins/SelectionHelper',

  /* SlickGrid */
  'slickcore': './vendor/js/slick.core.min',
  'slickgrid': './vendor/js/slick.grid.min',
  'slickformatters': './vendor/js/slick.editors.min',
  'slickeditors': './vendor/js/slick.formatters.min',
  'slickdataview': './vendor/js/slick.dataview.min',

  /* Emperor's objects */
  'util': './js/util',
  'model': './js/model',
  'multi-model': './js/multi-model',
  'view': './js/view',
  'controller': './js/controller',
  'draw': './js/draw',
  'scene3d': './js/sceneplotview3d',
  'shapes': './js/shapes',
  'animationdirector': './js/animate',
  'trajectory': './js/trajectory',
  'uistate': './js/ui-state',

  /* controllers */
  'abcviewcontroller': './js/abc-view-controller',
  'viewcontroller': './js/view-controller',
  'colorviewcontroller': './js/color-view-controller',
  'visibilitycontroller': './js/visibility-controller',
  'opacityviewcontroller': './js/opacity-view-controller',
  'scaleviewcontroller': './js/scale-view-controller',
  'shapecontroller': './js/shape-controller',
  'axescontroller': './js/axes-controller',
  'animationscontroller': './js/animations-controller',

  /* editors */
  'shape-editor': './js/shape-editor',
  'color-editor': './js/color-editor',
  'scale-editor': './js/scale-editor'

},
/*
   Libraries that are not AMD compatible need shim to declare their
   dependencies.
 */
'shim': {
  'jquery_drag': {
    'deps': ['jquery', 'jqueryui']
  },
  'chosen': {
    'deps': ['jquery'],
    'exports': 'jQuery.fn.chosen'
  },
  'contextmenu' : {
    'deps': ['jquery', 'jqueryui', 'position']
  },
  'filesaver' : {
    'deps': ['blob']
  },
  'canvastoblob' : {
    'deps': ['blob']
  },
  'slickcore': ['jqueryui'],
  'slickgrid': ['slickcore', 'jquery_drag', 'slickformatters', 'slickeditors',
                'slickdataview']
}
});

emperorRequire(
["jquery", "model", "controller"],
function($, model, EmperorController) {
  var DecompositionModel = model.DecompositionModel;

  var div = $('#emperor-notebook-0xdde299a');

  var data = {"info": null, "plot": {"decomposition": {"axes_names": [0, 1, 2, 3, 4], "ci": null, "coordinates": [[0.36265421888396226, -0.7917933718911023, 0.1301196429400284, -0.09227774011918702, 0.025628700857128234], [0.40150061134300175, -0.6374756439478253, 0.20126875319089219, -0.19890743851778286, -0.0071218612051171986], [0.4504237513810689, -0.6528142976153404, 0.22669681664208943, -0.2051950028784429, -0.006344375829640658], [0.4773110978256695, -0.5808524006083547, 0.27403897445618375, -0.2629253965913203, 0.022458447663372096], [0.2239075076994667, -0.8831633926532302, -0.3060294476988082, 0.2608717549773316, -0.036271108284865544], [0.2227973787335552, -0.838828040562243, -0.41584278050421664, 0.43651719994522725, 0.030432160004723912], [-0.9623689557162215, 0.1159202340509169, 0.23963859331420465, 0.21633868443172294, -0.14914382610549526], [-0.9192693945283497, 0.11525686078385072, -0.513199279256235, -0.5319104540821136, 0.3746883579828807], [-0.9237545220749155, 0.09275479061879822, -0.16059179220796585, -0.195820591735002, -0.6413637978357261], [-1.0, 0.13343366403417786, 0.10011906414249133, 0.05812442924257115, -0.05906120854706151], [-0.9917447807245962, 0.12122693277443301, 0.11574507491559277, 0.0791253971487088, 0.04323914506649248], [-0.969754883463017, 0.1559651031882843, 0.2805776788775542, 0.2610739132689324, 0.42222119425142896], [0.6064426064924882, 0.6220117023112472, -0.0031393163785836285, -0.003064159857111225, 0.009606347074816732], [0.6149282747557971, 0.5771536299639567, -0.01019572217358597, 0.00880718570081718, -0.0011913559770395784], [0.6110491786109176, 0.5873533568434105, -0.0026232531033284316, 0.02232712999745895, -0.004181552577029533], [0.6086533753404757, 0.6260273190409659, -0.022805670092034807, 0.004303075131278638, -0.0033259021059571956], [0.6044989555353267, 0.6315617844877989, -0.028506492647406758, 0.0354461542991178, 0.0027356260981174795], [0.5827255799053689, 0.6062617691802529, -0.10527084441687072, 0.10716585963779306, -0.023004990531027013]], "edges": [], "percents_explained": [40.979500621825046, 26.769453933004616, 4.361689394596453, 4.1959717979805955, 3.6440652293860447], "sample_ids": ["SRR1770737", "SRR1770738", "SRR1770742", "SRR1770743", "SRR1770744", "SRR1770746", "SRR1770752", "SRR1770753", "SRR1770756", "SRR1770758", "SRR1770760", "SRR1770762", "SRR1770766", "SRR1770768", "SRR1770770", "SRR1770773", "SRR1770775", "SRR1770778"]}, "metadata": [["SRR1770737", "p6", "frue_ch", "Pasture", "Switzerland"], ["SRR1770738", "p5", "frue_ch", "Pasture", "Switzerland"], ["SRR1770742", "p4", "frue_ch", "Pasture", "Switzerland"], ["SRR1770743", "p3", "frue_ch", "Pasture", "Switzerland"], ["SRR1770744", "p2", "frue_ch", "Pasture", "Switzerland"], ["SRR1770746", "p1", "frue_ch", "Pasture", "Switzerland"], ["SRR1770752", "s6", "mtca_au", "Savanna", "Australia"], ["SRR1770753", "s5", "mtca_au", "Savanna", "Australia"], ["SRR1770756", "s4", "mtca_au", "Savanna", "Australia"], ["SRR1770758", "s3", "mtca_au", "Savanna", "Australia"], ["SRR1770760", "s2", "mtca_au", "Savanna", "Australia"], ["SRR1770762", "s1", "mtca_au", "Savanna", "Australia"], ["SRR1770766", "m6", "ukul_za", "Mesic_grassland", "South_Africa"], ["SRR1770768", "m5", "ukul_za", "Mesic_grassland", "South_Africa"], ["SRR1770770", "m4", "ukul_za", "Mesic_grassland", "South_Africa"], ["SRR1770773", "m3", "ukul_za", "Mesic_grassland", "South_Africa"], ["SRR1770775", "m2", "ukul_za", "Mesic_grassland", "South_Africa"], ["SRR1770778", "m1", "ukul_za", "Mesic_grassland", "South_Africa"]], "metadata_headers": ["SampleID", "name", "group", "type", "country"], "settings": {}, "type": "scatter"}};

  var plot, biplot = null, ec;

  function init() {
    // Initialize the DecompositionModel for the scatter plot, and optionally
    // add one for the biplot arrows
    plot = new DecompositionModel(data.plot.decomposition,
                                  data.plot.metadata_headers,
                                  data.plot.metadata,
                                  data.plot.type);

    if (data.biplot) {
      biplot = new DecompositionModel(data.biplot.decomposition,
                                      data.biplot.metadata_headers,
                                      data.biplot.metadata,
                                      data.biplot.type);
    }

    ec = new EmperorController(plot, biplot, "emperor-notebook-0xdde299a", undefined,
                               data.info);
  }

  function animate() {
    requestAnimationFrame(animate);
    ec.render();
  }
  $(window).resize(function() {
    ec.resize(div.innerWidth(), div.innerHeight());
  });

  $(function(){
    init();
    animate();

    ec.ready = function () {
      // any other code that needs to be executed when emperor is loaded should
      // go here
      ec.loadConfig(data.plot.settings);

      // sets up generic callbacks for 3rd party consumers
      var plotView = ec.sceneViews[0];
      /*__custom_on_ready_code__*/
      
    }
  });

}); // END REQUIRE.JS block
    </script>
  </body>
</html>